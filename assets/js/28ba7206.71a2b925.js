"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[155],{1791:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Gradio-2b9f7cefbc0c5c579f77ee0f8da5c975.png"},3049:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/Transformer\u793a\u610f\u56fe-192b7880ff0b2c37a6ed9a5fde2fb690.png"},8041:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/repeat\u3001epoch\u3001batch_size-17ee31a9598f4c903d4beb57fb088f27.png"},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>l});var s=r(6540);const t={},i=s.createContext(t);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(i.Provider,{value:n},e.children)}},8475:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"AI","title":"\u5927\u6a21\u578b","description":"\u5927\u6a21\u578b\u76f8\u5173\u8bba\u6587PDF\u6c47\u603b","source":"@site/docs/AI.md","sourceDirName":".","slug":"/AI","permalink":"/blog/docs/AI","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/AI.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Translate your site","permalink":"/blog/docs/tutorial-extras/translate-your-site"},"next":{"title":"\u6837\u5f0f\u4f18\u5148\u7ea7","permalink":"/blog/docs/CSS/"}}');var t=r(4848),i=r(8453);const d={},l="\u5927\u6a21\u578b",c={},a=[{value:"\u5927\u6a21\u578b\u76f8\u5173\u8bba\u6587PDF\u6c47\u603b",id:"\u5927\u6a21\u578b\u76f8\u5173\u8bba\u6587pdf\u6c47\u603b",level:2},{value:"\u5927\u540d\u9f0e\u9f0e\u7684Transformer",id:"\u5927\u540d\u9f0e\u9f0e\u7684transformer",level:3},{value:"CV\u9886\u57df\u7684\u65b0\u57fa\u77f3\uff1a Vision Transformer",id:"cv\u9886\u57df\u7684\u65b0\u57fa\u77f3-vision-transformer",level:3},{value:"\u6587\u751f\u56fe\u3001\u6587\u751f\u89c6\u9891\u7684\u57fa\u77f3\uff1aDiffusion Transformer",id:"\u6587\u751f\u56fe\u6587\u751f\u89c6\u9891\u7684\u57fa\u77f3diffusion-transformer",level:3},{value:"\u5206\u5272\u4e00\u5207\u5927\u6a21\u578b",id:"\u5206\u5272\u4e00\u5207\u5927\u6a21\u578b",level:3},{value:"\u5f00\u6e90\u6587\u751f\u89c6\u9891\uff1a Stable Video Diffusion",id:"\u5f00\u6e90\u6587\u751f\u89c6\u9891-stable-video-diffusion",level:3},{value:"\u4ec0\u4e48\u662f\u5fae\u8c03\uff1f",id:"\u4ec0\u4e48\u662f\u5fae\u8c03",level:3},{value:"\u4ec0\u4e48\u662f\u5f3a\u5316\u5b66\u4e60\uff1f",id:"\u4ec0\u4e48\u662f\u5f3a\u5316\u5b66\u4e60",level:3},{value:"Google IO 2024\u53d1\u5e03\u5185\u5bb9\u7b80\u4ecb",id:"google-io-2024\u53d1\u5e03\u5185\u5bb9\u7b80\u4ecb",level:3},{value:"\u5927\u6a21\u578b\u6587\u4ef6\u540e\u7f00\u540d\u53ca\u5176\u542b\u4e49",id:"\u5927\u6a21\u578b\u6587\u4ef6\u540e\u7f00\u540d\u53ca\u5176\u542b\u4e49",level:2},{value:"Huggingface",id:"huggingface",level:2},{value:"Hugging Face\u955c\u50cf\u7ad9",id:"hugging-face\u955c\u50cf\u7ad9",level:3},{value:"\u6307\u5b9a\u672c\u5730\u8def\u5f84\uff0c\u907f\u514d\u53cd\u590d\u4e0b\u8f7d",id:"\u6307\u5b9a\u672c\u5730\u8def\u5f84\u907f\u514d\u53cd\u590d\u4e0b\u8f7d",level:3},{value:"\u5f3a\u5316\u5b66\u4e60",id:"\u5f3a\u5316\u5b66\u4e60",level:2},{value:"\u6df1\u5ea6\u5b66\u4e60",id:"\u6df1\u5ea6\u5b66\u4e60",level:2},{value:"\u6df1\u5ea6\u5b66\u4e60\u7684\u57fa\u672c\u6982\u5ff5",id:"\u6df1\u5ea6\u5b66\u4e60\u7684\u57fa\u672c\u6982\u5ff5",level:2},{value:"\u6b8b\u5dee\u8fde\u63a5",id:"\u6b8b\u5dee\u8fde\u63a5",level:3},{value:"\u5f52\u4e00\u5316",id:"\u5f52\u4e00\u5316",level:3},{value:"\u7ebf\u6027\u5c42",id:"\u7ebf\u6027\u5c42",level:3},{value:"SoftMax",id:"softmax",level:3},{value:"\u6fc0\u6d3b\u51fd\u6570",id:"\u6fc0\u6d3b\u51fd\u6570",level:3},{value:"epoch",id:"epoch",level:3},{value:"repeat",id:"repeat",level:3},{value:"batch-size",id:"batch-size",level:3},{value:"\u8fc7\u62df\u5408\u548c\u6b20\u62df\u5408\u7684\u6700\u901a\u4fd7\u89e3\u91ca",id:"\u8fc7\u62df\u5408\u548c\u6b20\u62df\u5408\u7684\u6700\u901a\u4fd7\u89e3\u91ca",level:3},{value:"PyTorch",id:"pytorch",level:2},{value:"PyTorch\u76f8\u5bf9Numpy\u7684\u4f18\u52bf",id:"pytorch\u76f8\u5bf9numpy\u7684\u4f18\u52bf",level:3},{value:"\u5c06\u5f20\u91cf\u653e\u5165GPU\u73af\u5883",id:"\u5c06\u5f20\u91cf\u653e\u5165gpu\u73af\u5883",level:3},{value:"\u5f20\u91cf",id:"\u5f20\u91cf",level:2},{value:"\u5f20\u91cf\u7b80\u4ecb",id:"\u5f20\u91cf\u7b80\u4ecb",level:3},{value:"\u5f20\u91cf\u7684\u5143\u7d20\u7c7b\u578b",id:"\u5f20\u91cf\u7684\u5143\u7d20\u7c7b\u578b",level:3},{value:"\u7279\u6b8a\u7684\u5f20\u91cf",id:"\u7279\u6b8a\u7684\u5f20\u91cf",level:3},{value:"\u5f20\u91cf\u548cNumpy\u6570\u7ec4\u7684\u4e92\u8f6c",id:"\u5f20\u91cf\u548cnumpy\u6570\u7ec4\u7684\u4e92\u8f6c",level:3},{value:"\u77e9\u9635\u7684\u4e58\u6cd5",id:"\u77e9\u9635\u7684\u4e58\u6cd5",level:3},{value:"\u5b89\u88c5gradio",id:"\u5b89\u88c5gradio",level:2},{value:"\u5bfc\u5165gradio",id:"\u5bfc\u5165gradio",level:2},{value:"\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b",id:"\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b",level:2},{value:"gr.Interface()\u7684\u4e09\u5927\u91cd\u8981\u53c2\u6570",id:"grinterface\u7684\u4e09\u5927\u91cd\u8981\u53c2\u6570",level:2},{value:"Interface()\u7684\u5176\u5b83\u53c2\u6570",id:"interface\u7684\u5176\u5b83\u53c2\u6570",level:2},{value:"\u6570\u636e\u7c7b\u578b",id:"\u6570\u636e\u7c7b\u578b",level:2},{value:"\u8f93\u51fa\u7ec4\u4ef6\u7684\u7c7b\u578b",id:"\u8f93\u51fa\u7ec4\u4ef6\u7684\u7c7b\u578b",level:2},{value:"Gradio\u96c6\u6210\u5927\u6a21\u578b",id:"gradio\u96c6\u6210\u5927\u6a21\u578b",level:2},{value:"AI\u7ed8\u753b\u7684\u5e94\u7528\u573a\u666f",id:"ai\u7ed8\u753b\u7684\u5e94\u7528\u573a\u666f",level:2},{value:"Stable Diffusion",id:"stable-diffusion-1",level:2},{value:"SD\u7684\u53d1\u5e03\u65f6\u95f4",id:"sd\u7684\u53d1\u5e03\u65f6\u95f4",level:3},{value:"SDXL\u7b80\u4ecb",id:"sdxl\u7b80\u4ecb",level:3},{value:"SD\u7684\u4e3b\u8981\u539f\u7406",id:"sd\u7684\u4e3b\u8981\u539f\u7406",level:3},{value:"\u4ece U-Net \u5230Transformer",id:"\u4ece-u-net-\u5230transformer",level:3},{value:"\u9690\u7a7a\u95f4\u7684\u4f5c\u7528",id:"\u9690\u7a7a\u95f4\u7684\u4f5c\u7528",level:3},{value:"SD\u5e94\u7528\u7684\u4e3b\u8981\u6587\u4ef6\u5939",id:"sd\u5e94\u7528\u7684\u4e3b\u8981\u6587\u4ef6\u5939",level:3},{value:"LoRA\u8bad\u7ec3",id:"lora\u8bad\u7ec3",level:2},{value:"repeat\u3001epoch\u3001batch_size\u7684\u533a\u522b",id:"repeatepochbatch_size\u7684\u533a\u522b",level:3},{value:"\u5b66\u4e60\u7387",id:"\u5b66\u4e60\u7387",level:3},{value:"\u6253tag",id:"\u6253tag",level:3},{value:"\u63d0\u793a\u8bcd",id:"\u63d0\u793a\u8bcd",level:2},{value:"\u6743\u91cd\u8bed\u6cd5",id:"\u6743\u91cd\u8bed\u6cd5",level:3},{value:"Sora",id:"sora",level:2},{value:"Sora\u7b80\u4ecb",id:"sora\u7b80\u4ecb",level:3},{value:"Sora\u6709\u671b\u63a8\u52a8\u673a\u5668\u4eba\u7684\u53d1\u5c55",id:"sora\u6709\u671b\u63a8\u52a8\u673a\u5668\u4eba\u7684\u53d1\u5c55",level:3},{value:"SVD",id:"svd",level:2},{value:"Stable Video Diffusion\u7b80\u4ecb",id:"stable-video-diffusion\u7b80\u4ecb",level:3},{value:"SVD\u7684\u8bad\u7ec3\u8fc7\u7a0b",id:"svd\u7684\u8bad\u7ec3\u8fc7\u7a0b",level:3},{value:"SVD\u914d\u5408ComfyUI",id:"svd\u914d\u5408comfyui",level:2},{value:"Transformer \u793a\u610f\u56fe",id:"transformer-\u793a\u610f\u56fe",level:2},{value:"Transformer \u6e90\u7801",id:"transformer-\u6e90\u7801",level:2}];function o(e){const n={a:"a",code:"code",del:"del",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u5927\u6a21\u578b",children:"\u5927\u6a21\u578b"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5927\u6a21\u578b\u76f8\u5173\u8bba\u6587pdf\u6c47\u603b",children:"\u5927\u6a21\u578b\u76f8\u5173\u8bba\u6587PDF\u6c47\u603b"}),"\n",(0,t.jsx)(n.h3,{id:"\u5927\u540d\u9f0e\u9f0e\u7684transformer",children:"\u5927\u540d\u9f0e\u9f0e\u7684Transformer"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6807\u9898\uff1a Attention  Is  All  You  Need"}),"\n",(0,t.jsx)(n.li,{children:"\u4e2d\u6587\u6807\u9898\uff1a \u6ce8\u610f\u529b\u662f\u4f60\u6240\u9700\u8981\u7684\u4e00\u5207"}),"\n",(0,t.jsx)(n.li,{children:"\u53d1\u8868\u65f6\u95f4\uff1a 2017\u5e74"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"cv\u9886\u57df\u7684\u65b0\u57fa\u77f3-vision-transformer",children:"CV\u9886\u57df\u7684\u65b0\u57fa\u77f3\uff1a Vision Transformer"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6807\u9898\uff1a An Image Is Worth 16X16 Words\uff1a Transformers for Image Recognition At Scale"}),"\n",(0,t.jsx)(n.li,{children:"\u4e2d\u6587\u6807\u9898\uff1a \u4e00\u5f20\u56fe\u7247\u7b49\u4ef7\u4e8e16x16\u5927\u5c0f\u7684\u5b57\uff1a\u5c06Transformer\u7528\u4e8e\u56fe\u50cf\u8bc6\u522b"}),"\n",(0,t.jsx)(n.li,{children:"\u53d1\u8868\u65f6\u95f4\uff1a 2020\u5e7410\u6708"}),"\n",(0,t.jsxs)(n.li,{children:["\u8bba\u6587\u5730\u5740\uff1a ",(0,t.jsx)(n.a,{href:"https://arxiv.org/abs/2010.11929",children:"https://arxiv.org/abs/2010.11929"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u6587\u751f\u56fe\u6587\u751f\u89c6\u9891\u7684\u57fa\u77f3diffusion-transformer",children:"\u6587\u751f\u56fe\u3001\u6587\u751f\u89c6\u9891\u7684\u57fa\u77f3\uff1aDiffusion Transformer"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6807\u9898\uff1a Scalsble Diffusion Models with Transformers   \uff08DiT\uff09"}),"\n",(0,t.jsx)(n.li,{children:"\u4e2d\u6587\u6807\u9898\uff1a \u57fa\u4e8eTransformers\u7684\u53ef\u6269\u5c55\u7684\u6269\u6563\u6a21\u578b"}),"\n",(0,t.jsx)(n.li,{children:"\u53d1\u8868\u65f6\u95f4\uff1a 2022\u5e7412\u6708"}),"\n",(0,t.jsxs)(n.li,{children:["\u5730\u5740\uff1a ",(0,t.jsx)(n.a,{href:"https://arxiv.org/pdf/2212.09748",children:"https://arxiv.org/pdf/2212.09748"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u5206\u5272\u4e00\u5207\u5927\u6a21\u578b",children:"\u5206\u5272\u4e00\u5207\u5927\u6a21\u578b"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6807\u9898\uff1a Segment Anything"}),"\n",(0,t.jsx)(n.li,{children:"\u4e2d\u6587\u6807\u9898\uff1a \u5206\u5272\u4e00\u5207"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u5f00\u6e90\u6587\u751f\u89c6\u9891-stable-video-diffusion",children:"\u5f00\u6e90\u6587\u751f\u89c6\u9891\uff1a Stable Video Diffusion"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u53d1\u5e03\u65f6\u95f4\uff1a 2023\u5e7411\u6708"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u4ec0\u4e48\u662f\u5fae\u8c03",children:"\u4ec0\u4e48\u662f\u5fae\u8c03\uff1f"}),"\n",(0,t.jsx)(n.p,{children:"\u4ece\u5934\u5f00\u59cb\u8bad\u7ec3\u6a21\u578b\uff0c\u6210\u672c\u9ad8\u6602\u3002  \u5bf9\u6240\u6709\u7684\u53c2\u6570\u8fdb\u884c\u5fae\u8c03\uff0c\u662f\u4f4e\u6548\u7684\u3002 \u56fa\u5b9a\u524d\u9762\u7684\u5c42\uff0c\u53ea\u5fae\u8c03\u63a5\u8fd1\u4e0b\u6e38\u7684\u90a3\u51e0\u5c42\u53c2\u6570\uff0c\u6548\u679c\u53c8\u4e0d\u597d\u3002  \u5c06\u9ad8\u7ef4\u6620\u5c04\u5230\u4f4e\u7ef4\uff0c\u7136\u540e\u7ecf\u8fc7\u4e00\u4e2a\u7ebf\u6027\u5c42\uff0c\u518d\u4ece\u4f4e\u7ef4\u8fd8\u539f\u5230\u9ad8\u7ef4\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u4ec0\u4e48\u662f\u5f3a\u5316\u5b66\u4e60",children:"\u4ec0\u4e48\u662f\u5f3a\u5316\u5b66\u4e60\uff1f"}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7\u4e0e\u73af\u5883\u4ea4\u4e92\uff0c\u6839\u636e\u53cd\u9988\u6765\u5b66\u4e60\u6700\u4f73\u884c\u4e3a\u3002 \u667a\u80fd\u4f53\u8bc4\u4f30\u5f53\u524d\u7684\u72b6\u6001\uff0c\u91c7\u53d6\u76f8\u5e94\u7684\u52a8\u4f5c\uff0c\u6839\u636e\u52a8\u4f5c\u7684\u6b63\u786e\u4e0e\u5426\u5f97\u5230\u5956\u52b1\u6216\u60e9\u7f5a\u3002  \u667a\u80fd\u4f53\u901a\u8fc7\u4e0e\u73af\u5883\u7684\u4e92\u52a8\uff0c\u5b66\u4e60\u5230\u4e00\u4e2a\u7b56\u7565\uff0c\u4f7f\u5956\u52b1\u6700\u5927\u5316\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"google-io-2024\u53d1\u5e03\u5185\u5bb9\u7b80\u4ecb",children:"Google IO 2024\u53d1\u5e03\u5185\u5bb9\u7b80\u4ecb"}),"\n",(0,t.jsx)(n.p,{children:"\u57fa\u672c\u56f4\u7ed5AI\u3002Veo\u89c6\u9891\u751f\u6210\u6a21\u578b\u3002Gemini \u5927\u6a21\u578b\u3002 Agent\u5de5\u5177\u3002AI\u8f85\u52a9\u7f16\u7a0b\u5de5\u5177\u7b49\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u5927\u6a21\u578b\u6587\u4ef6\u540e\u7f00\u540d\u53ca\u5176\u542b\u4e49",children:"\u5927\u6a21\u578b\u6587\u4ef6\u540e\u7f00\u540d\u53ca\u5176\u542b\u4e49"}),"\n",(0,t.jsx)(n.p,{children:"\uff081\uff09  safetensors"}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u662f\u7531 Hugging Face \u63a8\u51fa\u7684\u4e00\u79cd\u65b0\u578b\u5b89\u5168\u6a21\u578b\u5b58\u50a8\u683c\u5f0f\uff0c\u7279\u522b\u5173\u6ce8\u6a21\u578b\u5b89\u5168\u6027\u3001\u9690\u79c1\u4fdd\u62a4\u548c\u5feb\u901f\u52a0\u8f7d\u3002\u5b83\u4ec5\u5305\u542b\u6a21\u578b\u7684\u6743\u91cd\u53c2\u6570\uff0c\u800c\u4e0d\u5305\u62ec\u6267\u884c\u4ee3\u7801\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u6a21\u578b\u6587\u4ef6\u5927\u5c0f\uff0c\u63d0\u9ad8\u52a0\u8f7d\u901f\u5ea6\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\uff082\uff09 ckpt"}),"\n",(0,t.jsx)(n.p,{children:"PyTorch Lightning \u6846\u67b6\u91c7\u7528\u7684\u6a21\u578b\u5b58\u50a8\u683c\u5f0f\u3002\u5b83\u4e0d\u4ec5\u5305\u542b\u4e86\u6a21\u578b\u53c2\u6570\uff0c\u8fd8\u5305\u62ec\u4f18\u5316\u5668\u72b6\u6001\u4ee5\u53ca\u53ef\u80fd\u7684\u8bad\u7ec3\u5143\u6570\u636e\u4fe1\u606f\uff0c\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u65e0\u7f1d\u5730\u6062\u590d\u8bad\u7ec3\u6216\u6267\u884c\u63a8\u7406\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\uff083\uff09 bin"}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u5e38\u662f\u4e00\u79cd\u901a\u7528\u7684\u4e8c\u8fdb\u5236\u683c\u5f0f\u6587\u4ef6\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u5b58\u50a8\u4efb\u610f\u7c7b\u578b\u7684\u6570\u636e\u3002\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u7528\u4e8e\u5b58\u50a8\u539f\u59cb\u4e8c\u8fdb\u5236\u6743\u91cd\u6570\u636e\uff0c\u52a0\u8f7d\u65f6\u9700\u989d\u5916\u5904\u7406\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\uff084\uff09 pth"}),"\n",(0,t.jsx)(n.p,{children:"\u662f PyTorch \u4e2d\u7528\u4e8e\u4fdd\u5b58\u6a21\u578b\u72b6\u6001\u7684\u6807\u51c6\u683c\u5f0f\u3002\u65b9\u4fbf\u6a21\u578b\u7684\u6301\u4e45\u5316\u548c\u590d\u7528\uff0c\u652f\u6301\u5b8c\u6574\u6a21\u578b\u7ed3\u6784\u548c\u53c2\u6570\u7684\u4fdd\u5b58\u4e0e\u6062\u590d\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"huggingface",children:"Huggingface"}),"\n",(0,t.jsx)(n.h3,{id:"hugging-face\u955c\u50cf\u7ad9",children:"Hugging Face\u955c\u50cf\u7ad9"}),"\n",(0,t.jsxs)(n.p,{children:["\u56fd\u5185\u7f51\u7edc\u73af\u5883\u65e0\u6cd5\u4f7f\u7528Huggingface\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u955c\u50cf\u7ad9 \uff1a",(0,t.jsx)(n.a,{href:"https://hf-mirror.com",children:"https://hf-mirror.com"})]}),"\n",(0,t.jsx)(n.p,{children:"\u8981\u4e0b\u8f7d\u955c\u50cf\u7ad9\u7684\u5927\u6a21\u578b\u6587\u4ef6\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u65b9\u6cd5\u4e00\uff1a \u76f4\u63a5\u5728\u7f51\u9875\u4e0b\u8f7d"}),"\n",(0,t.jsxs)(n.p,{children:["\u6253\u5f00\u5927\u6a21\u578b\u9875\u9762 ",(0,t.jsx)(n.a,{href:"https://hf-mirror.com/%E7%94%A8%E6%88%B7%E5%90%8D/%E6%A8%A1%E5%9E%8B%E5%90%8D",children:"https://hf-mirror.com/\u7528\u6237\u540d/\u6a21\u578b\u540d"}),"  \uff0c\u8fdb\u5165files\u6807\u7b7e\uff0c\u76f4\u63a5\u4e0b\u8f7d\u91cc\u9762\u7684\u6587\u4ef6\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u65b9\u6cd5\u4e8c\uff1a \u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177"}),"\n",(0,t.jsx)(n.p,{children:"\u9996\u5148\u5b89\u88c5\u547d\u4ee4\u884c\u5de5\u5177Python\u5305\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"pip  install  -U  huggingface_hub\n"})}),"\n",(0,t.jsxs)(n.p,{children:['\u7136\u540e\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf  HF_ENDPOINT  =  "',(0,t.jsx)(n.a,{href:"https://hf-mirror.com",children:"https://hf-mirror.com"}),'"']}),"\n",(0,t.jsx)(n.p,{children:"\u7136\u540e\u4e0b\u8f7d\u6a21\u578b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"huggingface-cli  download  --resume-download  gpt2  --local-dir  gpt2\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e0b\u8f7d\u6570\u636e\u96c6\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"huggingface-cli  download  --repo-type  drataset  --esume-download  wikitext  --local-dir  wikitext\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6ce8\u610f\uff0c\u6709\u4e9b\u9879\u76ee\u9700\u8981\u767b\u5f55Huggingface Face\u6e90\u7ad9\u83b7\u53d6Token\u624d\u80fd\u4e0b\u8f7d\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u6307\u5b9a\u672c\u5730\u8def\u5f84\u907f\u514d\u53cd\u590d\u4e0b\u8f7d",children:"\u6307\u5b9a\u672c\u5730\u8def\u5f84\uff0c\u907f\u514d\u53cd\u590d\u4e0b\u8f7d"}),"\n",(0,t.jsx)(n.p,{children:"\u5927\u6a21\u578b\u6587\u4ef6\u5f88\u5927\uff0c\u6bcf\u6b21\u90fd\u91cd\u65b0\u4e0b\u8f7d\u8d39\u65f6\u8d39\u529b\uff0c\u56e0\u6b64\u53ef\u4ee5\u6307\u5b9a\u672c\u5730\u8def\u5f84\u3002from_pretrain \u51fd\u6570\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u6a21\u578b\u7684id\uff0c\u4e5f\u53ef\u4ee5\u63a5\u6536\u6a21\u578b\u7684\u672c\u5730\u5b58\u50a8\u8def\u5f84\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5148\u5728\u7f51\u7edc\u8f83\u597d\u65f6\u5c06HF\u4e0a\u7684\u6574\u4e2a\u6587\u4ef6\u5939\u4e0b\u8f7d\u4e0b\u6765\uff0c\u7136\u540e\u63a8\u7406\u7684\u65f6\u5019\u6307\u5b9a\u672c\u5730\u7684\u8fd9\u4e2a\u6587\u4ef6\u5939\u5373\u53ef\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u5f3a\u5316\u5b66\u4e60",children:"\u5f3a\u5316\u5b66\u4e60"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u63d0\u793a\u5b66\u4e60"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u63d2\u69fd\u5f0f\u3001\u7c7b\u4f3c\u4e8e\u63d2\u503c\u5b57\u7b26\u4e32"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u8bed\u5883\u5b66\u4e60"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u5e26\u6709\u60c5\u611f\u6781\u6027\u7684\u53e5\u5b50\u793a\u4f8b"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u9ad8\u6548\u6a21\u578b\u5fae\u8c03LoRA"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u539f\u672c\u77e9\u9635\u65c1\u8fb9\u6dfb\u52a0\u4f4e\u79e9\u77e9\u9635\r\n\u5728\u6b8b\u5dee\u8fde\u63a5\u6dfb\u52a0\u9002\u914d\u5c42\u4f5c\u4e3a\u53ef\u8bad\u7ec3\u53c2\u6570"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4f4e\u79e9\u77e9\u9635"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u79e9\u5e8f\uff1a\u77e9\u9635\u4e2d\u6700\u5927\u4e0d\u76f8\u5173\u5411\u91cf\u7684\u4e2a\u6570\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u6709\u79e9\u5e8f\u7684\u7a0b\u5ea6\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u77e9\u9635\u7684\u79e9\u7684\u5ea6\u91cf\u5176\u5b9e\u5c31\u662f\u77e9\u9635\u7684\u884c\u5217\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u3002\u5982\u679c\u77e9\u9635\u7684\u5404\u884c\u6216\u5217\u662f\u7ebf\u6027\u65e0\u5173\u7684\uff0c\u77e9\u9635\u5c31\u662f\u6ee1\u79e9\u7684\u3002\u975e\u96f6\u5143\u7d20\u7684\u884c\u6570\u6216\u5217\u6570\u51b3\u5b9a\u4e86\u79e9\u7684\u591a\u5c11\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u4f4e\u79e9\u77e9\u9635\uff1a\u77e9\u9635\u7684\u79e9\u76f8\u5bf9\u77e9\u9635\u7684\u884c\u6570\u6216\u5217\u6570\u800c\u8a00\u5f88\u5c0f\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u56fe\u50cf\u5904\u7406\u4e2d\uff0c\u79e9\u53ef\u4ee5\u7406\u89e3\u4e3a\u5305\u542b\u4fe1\u606f\u7684\u4e30\u5bcc\u7a0b\u5ea6\u3002\u5982\u679c\u4e00\u5f20\u8349\u539f\u56fe\u5168\u662f\u8349\uff0c\u90a3\u4e48\u5c31\u662f\u4f4e\u79e9\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u7a00\u758f\u77e9\u9635"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u7a00\u758f\u662f\u6307\u77e9\u9635\u4e2d\u975e\u96f6\u5143\u7d20\u7684\u4e2a\u6570\u5c11\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u601d\u7ef4\u94fe"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u89e3\u9898\u601d\u8def\u548c\u6b65\u9aa4\u8f93\u5165\u7ed9\u6a21\u578b\uff0c\u4f7f\u5f97\u6a21\u578b\u4e0d\u4ec5\u6709\u7ed3\u679c\uff0c\u8fd8\u6709\u4e2d\u95f4\u6b65\u9aa4\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6df1\u5ea6\u5b66\u4e60",children:"\u6df1\u5ea6\u5b66\u4e60"}),"\n",(0,t.jsx)(n.h2,{id:"\u6df1\u5ea6\u5b66\u4e60\u7684\u57fa\u672c\u6982\u5ff5",children:"\u6df1\u5ea6\u5b66\u4e60\u7684\u57fa\u672c\u6982\u5ff5"}),"\n",(0,t.jsx)(n.h3,{id:"\u6b8b\u5dee\u8fde\u63a5",children:"\u6b8b\u5dee\u8fde\u63a5"}),"\n",(0,t.jsx)(n.p,{children:"\u5c06\u8f93\u5165\u591a\u6b21\u5904\u7406\u540e\uff0c\u518d\u548c\u6700\u5f00\u59cb\u7684\u90a3\u4e2a\u8f93\u5165\u505a\u4e00\u6b21\u52a0\u6cd5\u8fd0\u7b97"}),"\n",(0,t.jsx)(n.h3,{id:"\u5f52\u4e00\u5316",children:"\u5f52\u4e00\u5316"}),"\n",(0,t.jsxs)(n.p,{children:["\u4f7f\u4e00\u7ec4\u6570\u636e\u9650\u5b9a\u5728\u4e00\u4e2a\u8303\u56f4\u5185\uff0c\u59820",(0,t.jsx)(n.del,{children:"1\u6216-1"}),"1\uff0c\u4ee5\u52a0\u5feb\u6536\u655b"]}),"\n",(0,t.jsx)(n.h3,{id:"\u7ebf\u6027\u5c42",children:"\u7ebf\u6027\u5c42"}),"\n",(0,t.jsx)(n.p,{children:"\u52a0\u5165\u4e00\u7ec4\u6743\u91cd\uff0c\u7136\u540e\u4e0d\u65ad\u8bad\u7ec3\u8c03\u6574"}),"\n",(0,t.jsx)(n.h3,{id:"softmax",children:"SoftMax"}),"\n",(0,t.jsx)(n.p,{children:"\u5c06\u4e00\u7ec4\u503c\u8f6c\u4e3a\u4e00\u7ec4\u6982\u7387\uff0c\u603b\u548c\u4e3a1"}),"\n",(0,t.jsx)(n.h3,{id:"\u6fc0\u6d3b\u51fd\u6570",children:"\u6fc0\u6d3b\u51fd\u6570"}),"\n",(0,t.jsx)(n.p,{children:"\u589e\u52a0\u975e\u7ebf\u6027\uff0c\u5982\u679c\u6ca1\u6709\u6fc0\u6d3b\u51fd\u6570\uff0c\u5c31\u7b97\u5c42\u518d\u591a\u8ddf\u4e00\u5c42\u4e5f\u6ca1\u533a\u522b\u3002\u76ee\u524d\u6700\u5e38\u7528\u7684\u662fReLu\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"epoch",children:"epoch"}),"\n",(0,t.jsx)(n.p,{children:"\u628a\u6574\u4e2a\u6570\u636e\u96c6\u904d\u5386\u4e00\u6b21\u79f0\u4e3a\u4e00\u4e2aepoch\u3002\u63a8\u8350\u6bcf\u8fd0\u884c\u5b8c\u4e00\u4e2aepoch\u5c31\u4fdd\u5b58\u4e00\u6b21\u8bb0\u5f55\uff0c\u8fd9\u6837\u5c31\u6709\u66f4\u591a\u7684\u6a21\u578b\u53ef\u4f9b\u9009\u62e9\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"repeat",children:"repeat"}),"\n",(0,t.jsx)(n.p,{children:"\u5355\u5f20\u56fe\u7247\u7684\u91cd\u590d\u904d\u5386\u6b21\u6570\u3002\u5728\u5f53\u524d\u7684epoch\u4e2d\uff0c\u6bcf\u5f20\u56fe\u7247\u88ab\u904d\u5386\u7684\u6b21\u6570\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"batch-size",children:"batch-size"}),"\n",(0,t.jsx)(n.p,{children:"\u6279\u6b21\u5927\u5c0f\u3002\u8f83\u5927\u7684\u6279\u6b21\u8bad\u7ec3\u901f\u5ea6\u66f4\u5feb\uff0c\u4f46\u9700\u8981\u66f4\u5927\u7684\u663e\u5b58\uff0c\u9700\u8981\u66f4\u591a\u7684\u6279\u6b21\u624d\u80fd\u6536\u655b\u3002\u8f83\u5c0f\u7684batch size\u8bad\u7ec3\u8f83\u6162\uff0c\u4f46\u663e\u5b58\u5360\u7528\u66f4\u5c0f\uff0c\u6a21\u578b\u6536\u655b\u7684\u66f4\u5feb\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u8fc7\u62df\u5408\u548c\u6b20\u62df\u5408\u7684\u6700\u901a\u4fd7\u89e3\u91ca",children:"\u8fc7\u62df\u5408\u548c\u6b20\u62df\u5408\u7684\u6700\u901a\u4fd7\u89e3\u91ca"}),"\n",(0,t.jsx)(n.p,{children:"\u6b20\u62df\u5408\uff1a\u6ca1\u5b66\u4f1a\u3002\r\n\u8fc7\u62df\u5408\uff1a\u5b66\u4f1a\u4e86\uff0c\u4f46\u662f\u5b66\u75f4\u4e86\uff0c\u4f46\u80fd\u4e3e\u4e00\u53cd\u4e09\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"pytorch",children:"PyTorch"}),"\n",(0,t.jsx)(n.h3,{id:"pytorch\u76f8\u5bf9numpy\u7684\u4f18\u52bf",children:"PyTorch\u76f8\u5bf9Numpy\u7684\u4f18\u52bf"}),"\n",(0,t.jsx)(n.p,{children:"PyTorch\u548cNumpy\u7684\u6570\u7ec4\u53ef\u4ee5\u4e92\u76f8\u8f6c\u6362\uff0c\u672c\u8d28\u4e0a\u5e76\u65e0\u533a\u522b\u3002PyTorch\u76f8\u5bf9\u4e8eNumpy\u7684\u4f18\u52bf\u5728\u4e8e\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u652f\u6301GPU\u5e76\u884c\u52a0\u901f"}),"\n",(0,t.jsx)(n.li,{children:"\u81ea\u52a8\u5fae\u5206"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u6240\u4ee5\uff0cPyTorch \u6bd4 Numpy \u5feb\uff0c\u800c Numpy \u53c8\u6bd4 Python \u539f\u751f\u6570\u7ec4\u5feb\uff01"}),"\n",(0,t.jsx)(n.h3,{id:"\u5c06\u5f20\u91cf\u653e\u5165gpu\u73af\u5883",children:"\u5c06\u5f20\u91cf\u653e\u5165GPU\u73af\u5883"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import torch \r\nprint(torch.__version__)# torch\u7248\u672c\r\nprint(torch.version.cuda) #cuda\u7248\u672c\r\nprint(torch.cuda.is_available()) #cuda\u662f\u5426\u53ef\u7528\n"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u4ee3\u7801"}),(0,t.jsx)(n.th,{children:"\u6ce8\u91ca"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:'device = torch.device("cuda")'}),(0,t.jsx)(n.td,{children:"\u4f7f\u7528GPU\u73af\u5883"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:'device = torch.device("cpu")'}),(0,t.jsx)(n.td,{children:"\u4f7f\u7528CPU\u73af\u5883"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"A.device"}),(0,t.jsx)(n.td,{children:"\u5224\u65ad\u5bf9\u8c61\u5728\u54ea\u4e2a\u73af\u8282"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"A= A.to(device)"}),(0,t.jsx)(n.td,{children:"\u653e\u5165device\u4e2d"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"A.cpu().device"}),(0,t.jsx)(n.td,{children:"\u653e\u5165CPU\u4e2d"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"torch.tensor(1.0) #\u6807\u91cf\r\ntorch.tensor([[1.0,1.0],[1.0,1.0]])#\u4e8c\u7ef4\u6570\u7ec4 (2,2)"}),"\n",(0,t.jsx)(n.h2,{id:"\u5f20\u91cf",children:"\u5f20\u91cf"}),"\n",(0,t.jsx)(n.h3,{id:"\u5f20\u91cf\u7b80\u4ecb",children:"\u5f20\u91cf\u7b80\u4ecb"}),"\n",(0,t.jsx)(n.p,{children:"\u5f20\u91cf\u662fPyTorch\u7b49\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u4e2d\u6700\u57fa\u672c\u7684\u6570\u636e\u7ed3\u6784\u3002\u5f20\u91cf\u7684\u672c\u8d28\u662f\u591a\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u662f\u4e00\u7ef4\u7684\u5411\u91cf\u3001\u4e8c\u7ef4\u7684\u77e9\u9635\u3001\u4e09\u7ef4\u7684\u6570\u7ec4\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u5f20\u91cf\u7684\u5143\u7d20\u7c7b\u578b",children:"\u5f20\u91cf\u7684\u5143\u7d20\u7c7b\u578b"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,t.jsx)(n.th,{children:"CPU\u8868\u793a"}),(0,t.jsx)(n.th,{children:"GPU\u8868\u793a"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"32\u4f4d\u77ed\u6574\u578b"}),(0,t.jsx)(n.td,{children:"torch.IntTensor"}),(0,t.jsx)(n.td,{children:"torch.cuda.intTensor"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"64\u4f4d\u957f\u6574\u578b"}),(0,t.jsx)(n.td,{children:"torch.LongTensor"}),(0,t.jsx)(n.td,{children:"torch.cuda.LongTensor"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u5355\u7cbe\u5ea6\u6d6e\u70b9\u578b"}),(0,t.jsx)(n.td,{children:"torch.FloatTensor"}),(0,t.jsx)(n.td,{children:"torch.cuda.FloatTensor"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u578b"}),(0,t.jsx)(n.td,{children:"torch.DoubleTensor"}),(0,t.jsx)(n.td,{children:"torch.cuda.DoubleTensor"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u7279\u6b8a\u7684\u5f20\u91cf",children:"\u7279\u6b8a\u7684\u5f20\u91cf"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u4ee3\u7801"}),(0,t.jsx)(n.th,{children:"\u4f5c\u7528"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"torch.zeros(m,n)"}),(0,t.jsx)(n.td,{children:"mxn\u7684\u51680\u77e9\u9635"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"torch.ones(m,n)"}),(0,t.jsx)(n.td,{children:"mxn\u7684\u51681\u77e9\u9635"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"torch.eye(m,n)"}),(0,t.jsx)(n.td,{children:"mxn\u7684\u5355\u4f4d\u77e9\u9635\uff0c\u5bf9\u89d2\u7ebf\u4e3a1\uff0c\u5176\u5b83\u4e3a0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"torch.randn(m,n)"}),(0,t.jsx)(n.td,{children:"mxn\u7684\u6b63\u6001\u5206\u5e03\u7684\u968f\u673a\u6570\uff0c0~1\u4e4b\u95f4"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"torch.rand(m,n)"}),(0,t.jsx)(n.td,{children:"mxn\u7684\u5747\u5300\u5206\u5e03\u7684\u968f\u673a\u6570\uff0c0~1\u4e4b\u95f4"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"torch.Tensor([4,5,5,6])"}),(0,t.jsx)(n.td,{children:"\u6839\u636e\u6570\u7ec4\u5b57\u9762\u91cf\u76f4\u63a5\u521b\u5efa\u5f20\u91cf"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"torch.IntTensor([1,2])"}),(0,t.jsx)(n.td,{children:"\u6307\u5b9a\u6570\u636e\u7c7b\u578b"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"\u7d22\u5f15\u64cd\u4f5c\r\ny = x[0,  :  ]  \u7b2c1\u884c"}),"\n",(0,t.jsx)(n.h3,{id:"\u5f20\u91cf\u548cnumpy\u6570\u7ec4\u7684\u4e92\u8f6c",children:"\u5f20\u91cf\u548cNumpy\u6570\u7ec4\u7684\u4e92\u8f6c"}),"\n",(0,t.jsx)(n.p,{children:"Numpy\u8f6cTensor\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"arr = np.ones(5,3)\r\nT  = torch.from_numpy(a)\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6539\u53d8\u5f20\u91cf\u7684\u5f62\u72b6"}),"\n",(0,t.jsx)(n.p,{children:"\u5f20\u91cf\u5bf9\u8c61\u8c03\u7528view()\u65b9\u6cd5\u53ef\u4ee5\u6539\u53d8\u5f62\u72b6 \uff0c\u4f8b\u5982\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import torch \r\nT1 = Torch.ones(3,8)\r\nT2 = T1.view(4,6)\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u5c06\u67d0\u4e2a\u7ef4\u5ea6\u7684\u957f\u5ea6\u8bbe\u7f6e\u4e3a-1\uff0c\u4f1a\u81ea\u52a8\u8ba1\u7b97\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"import torch \r\nT1 = Torch.ones(3,8)\r\nT2 = T1.view(-1 ,6)   # \u7b2c\u4e00\u7ef4\u81ea\u52a8\u8ba1\u7b97\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd8\u6709\u4e24\u4e2a\u65b9\u6cd5\u53bb\u6389\u6216\u589e\u52a0\u957f\u5ea6\u4e3a1\u7684\u7ef4\u5ea6\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"squeeze(T) \uff1a \u53bb\u6389\u957f\u5ea6\u4e3a1\u7684\u7ef4\u5ea6"}),"\n",(0,t.jsx)(n.li,{children:"unsqueeze(T) \uff1a \u589e\u52a0\u957f\u5ea6\u4e3a1\u7684\u7ef4\u5ea6"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"dataloader\u7684\u53c2\u6570"}),"\n",(0,t.jsx)(n.p,{children:"dataset\t\u6570\u636e\u96c6\r\nbatch_size\t\u6279\u6b21\u5927\u5c0f\uff0c\u9ed8\u8ba41"}),"\n",(0,t.jsx)(n.p,{children:"Epoch\uff1a \u6240\u6709\u7684\u6837\u672c\u90fd\u8f93\u5165\u5230\u6a21\u578b\u4e2d\uff0c\u79f0\u4e3a\u4e00\u4e2aepoch\r\nIteration\uff1a \u4e00\u4e2aBatch\u7684\u6837\u672c\u8f93\u5165\u5230\u6a21\u578b\u4e2d\uff0c\u79f0\u4e3a\u4e00\u4e2aIteration\r\nbatch_size\uff1a \u4e00\u4e2a\u6279\u6b21\u7684\u5927\u5c0f\uff0c\u4e00\u4e2aEpoch=Batchsize*Iteration"}),"\n",(0,t.jsx)(n.p,{children:"DataLoader()\u7684\u53c2\u6570\uff1a\r\ndataset\t\u6570\u636e\u96c6\r\nbatch_size\t\u6279\u6b21\u5927\u5c0f\r\nshuffle\t\u662f\u5426\u4e71\u5e8f\r\nsampler\t\u6837\u672c\u91c7\u6837\u51fd\u6570\uff0c\u4e00\u822c\u65e0\u9700\u8bbe\u7f6e\r\nbatch_sampler\t\u6279\u6b21\u91c7\u6837\u51fd\u6570\uff0c\u4e00\u822c\u65e0\u9700\u8bbe\u7f6e\r\nnum_workers\t\u4f7f\u7528\u591a\u8fdb\u7a0b\u8bfb\u53d6\u6570\u636e\uff0c\u4f7f\u7528\u7684\u8fdb\u7a0b\u6570\r\ncollate_fn\t\u6574\u7406\u4e00\u4e2a\u6279\u6b21\u6570\u636e\u7684\u51fd\u6570"}),"\n",(0,t.jsx)(n.p,{children:"Dataset\t\u6570\u636e\u96c6\r\nDataLoader\t\u6570\u636e\u88c5\u8f7d\u5668"}),"\n",(0,t.jsx)(n.p,{children:"\u81ea\u5efa\u6570\u636e\u96c6\uff1a\r\ndataset = TensorDataset(torch.arange(1, 40))\r\ndl = DataLoader(dataset, batch_size=10)   # \u6279\u6b21\u5927\u5c0f10\uff0c\u56e0\u6b64\u67094\u4e2a\u6279\u6b21"}),"\n",(0,t.jsx)(n.h3,{id:"\u77e9\u9635\u7684\u4e58\u6cd5",children:"\u77e9\u9635\u7684\u4e58\u6cd5"}),"\n",(0,t.jsx)(n.p,{children:"T1.matmul(T2)\r\nT1 @  T2  # \u4e0e\u4e0a\u7b49\u4ef7"}),"\n",(0,t.jsx)(n.p,{children:"\u795e\u7ecf\u7f51\u7edc\u548c\u77e9\u9635\u4e58\u6cd5\u7684\u5bf9\u5e94"}),"\n",(0,t.jsx)(n.p,{children:"\u795e\u7ecf\u7f51\u7edc\u548c\u77e9\u9635\u4e58\u6cd5\u7684\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"\u9996\u5148\u5c06\u8f93\u5165\u5c55\u5e73\u4e3a\u4e00\u4e2a\u4e00\u7ef4\u5411\u91cf\uff0c\u4e2d\u95f4\u7684\u6bcf\u6761\u7ebf\u5bf9\u5e94\u7740\u4e00\u4e2a\u6570\u503c\uff0c\u8fd9\u4e9b\u6570\u503c\u7ec4\u5408\u8d77\u6765\u5c31\u662f\u4e00\u4e2a\u77e9\u9635\uff0c\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\u53eb\u505a\u6743\u91cd\u3002\u5982\u679c\u6bcf\u4e2a\u8f93\u5165\u8ddf\u6bcf\u4e2a\u8f93\u51fa\u5168\u90e8\u76f8\u8fde\uff0c\u5c31\u53eb\u505a\u5168\u8fde\u63a5\u3002"}),"\n",(0,t.jsx)(n.p,{children:"torch.nn\r\ntorch.nn\u662f\u795e\u7ecf\u7f51\u7edc\u5de5\u5177\u7bb1\uff0c\u8be5\u5de5\u5177\u7bb1\u5efa\u7acb\u4e8eAutogard\uff08\u4e3b\u8981\u6709\u81ea\u52a8\u6c42\u5bfc\u548c\u68af\u5ea6\u53cd\u5411\u4f20\u64ad\u529f\u80fd\uff09\uff0c\u63d0\u4f9b\u4e86\u7f51\u7edc\u642d\u5efa\u7684\u6a21\u7ec4\uff0c\u4f18\u5316\u5668\u7b49\u4e00\u7cfb\u5217\u529f\u80fd\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u642d\u5efa\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u7684\u6574\u4f53\u6d41\u7a0b\uff1a\r\n\u6570\u7ec4\u8bfb\u53d6\r\n\u5b9a\u4e49\u6a21\u578b\r\n\u5b9a\u4e49\u635f\u5931\u51fd\u6570\u548c\u4f18\u5316\u5668\r\n\u6a21\u578b\u8bad\u7ec3\r\n\u83b7\u53d6\u8bad\u7ec3\u7ed3\u679c"}),"\n",(0,t.jsx)(n.p,{children:"Torch \u8fd0\u7b97\r\ntorch.item()\t \u53d6\u51fa\u6570\u636e\uff0c\u6ce8\u610f\uff0c\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u65f6\u624d\u80fd\u7528\r\nT.numpy()\t\u8f6c\u4e3aNumpy\r\nT.from_numpy()\t\u4eceNumpy\u5bfc\u5165\r\nT.view()\t\u53d8\u5f62\u3001\u91cd\u6784\u5c3a\u5bf8\uff0c\u7c7b\r\n\u4f3cNumpy\u7684reshape\u53d8\u5f62\r\nT.transpose(0,1)\t\u884c\u5217\u4ea4\u6362"}),"\n",(0,t.jsx)(n.p,{children:"\u62fc\u63a5stack\r\ntorch.stack((A,B), dim=0) dim\u8868\u793a\u62fc\u63a5\u65b9\u5411"}),"\n",(0,t.jsx)(n.p,{children:"\u6b63\u5411\u4f20\u64ad\u3001\u53cd\u5411\u4f20\u64ad"}),"\n",(0,t.jsx)(n.p,{children:"\u6b63\u5411\uff1a\u7531\u8f93\u5165\u5f97\u5230\u8f93\u51fa\r\n\u53cd\u5411\uff1a\u6839\u636e\u635f\u5931\u51fd\u6570\u8ba1\u7b97\u9884\u6d4b\u503c\u4e0e\u771f\u5b9e\u503c\u4e4b\u95f4\u7684\u8bef\u5dee\uff0c\u8ba1\u7b97\u6bcf\u4e2a\u8282\u70b9\u5bf9\u5e94\u7684\u8f93\u5165\u7684\u68af\u5ea6\uff0c\u6700\u7ec8\u5f97\u5230\u53c2\u6570\u7684\u68af\u5ea6\u4fe1\u606f\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u68af\u5ea6\r\n\u4e3a\u4ec0\u4e48\u8981\u7b97\u68af\u5ea6\uff1f\r\n\u4f7f\u5f97\u635f\u5931\u51fd\u6570\u6700\u5c0f\uff0c\u68af\u5ea6\uff08\u659c\u7387\uff09\u4e3a0\r\ny.backward() \u8ba1\u7b97\u68af\u5ea6\r\nx.grad \u83b7\u53d6\u68af\u5ea6\u503c"}),"\n",(0,t.jsx)(n.p,{children:"\u68af\u5ea6\u4e0b\u964d\u6cd5\u662f\u4e00\u79cd\u81f4\u529b\u4e8e\u627e\u5230\u51fd\u6570\u6781\u503c\u70b9\u7684\u7b97\u6cd5\u3002\u6240\u8c13\u201c\u8bad\u7ec3\u201d\u6216\u201c\u5b66\u4e60\u201d\u5c31\u662f\u6539\u8fdb\u6a21\u578b\u53c2\u6570\uff0c\u4ee5\u4fbf\u901a\u8fc7\u5927\u91cf\u8bad\u7ec3\u6b65\u9aa4\u5c06\u635f\u5931\u6700\u5c0f\u5316\u3002\u68af\u5ea6\u4e0b\u964d\u6cd5\u7684\u601d\u8def\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u6cbf\u7740\u51fd\u6570\u4e0b\u964d\u6700\u5feb\u7684\u65b9\u5411\u6539\u53d8\u6a21\u578b\u53c2\u6570\uff0c\u76f4\u5230\u5230\u8fbe\u6700\u4f4e\u70b9\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8d85\u53c2\u6570\r\n\u8d85\u53c2\u6570\u5c31\u662f\u9700\u8981\u7528\u6237\u624b\u5de5\u914d\u7f6e\u7684\u53c2\u6570\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5b66\u4e60\u7387\r\nWi+1  =  Wi  -  \u5b66\u4e60\u7387 x  \u25bdWi\r\n\u5b66\u4e60\u7387\u5c31\u662f\u6bcf\u6b21\u4e0b\u964d\u7684\u5e45\u5ea6\u3002\u592a\u5c0f\uff0c\u5219\u9700\u8981\u5f88\u591a\u8f6e\u8fed\u4ee3\uff0c\u6d6a\u8d39\u8d44\u6e90\uff1b \u592a\u5927\uff0c\u5219\u53ef\u80fd\u4f1a\u8df3\u8fc7\u6700\u5c0f\u70b9"}),"\n",(0,t.jsx)(n.p,{children:"\u4e00\u4e2a\u7b80\u5355\u7684\u795e\u7ecf\u7f51\u7edc\u793a\u4f8b"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u4eec\u62ff\u4e00\u4e2a\u6700\u7b80\u5355\u7684FNN\u7f51\u7edc\u6765\u5bf9\u7ecf\u5178\u6570\u636e\u96c6diabetes\u7cd6\u5c3f\u75c5\u6570\u636e\u96c6\u6765\u8fdb\u884c\u5206\u7c7b\u9884\u6d4b\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    import numpy as np\t\r\n    import torch\r\n    import matplotlib.pyplot as plt\r\n    from torch.utils.data import Dataset, DataLoader\r\n     \r\n     \r\n    # Prepare the dataset \u51c6\u5907\u6570\u636e\u96c6\r\n    class DiabetesDateset(Dataset):\r\n        # \u52a0\u8f7d\u6570\u636e\u96c6\r\n        def __init__(self, filepath):\r\n            xy = np.loadtxt(filepath, delimiter=',', dtype=np.float32, encoding='utf-8')\r\n            self.len = xy.shape[0]  # shape[0]\u662f\u77e9\u9635\u7684\u884c\u6570,shape[1]\u662f\u77e9\u9635\u7684\u5217\u6570\r\n            self.x_data = torch.from_numpy(xy[:, :-1])\r\n            self.y_data = torch.from_numpy(xy[:, [-1]])\r\n     \r\n        # \u83b7\u53d6\u6570\u636e\u7d22\u5f15\r\n        def __getitem__(self, index):\r\n            return self.x_data[index], self.y_data[index]\r\n     \r\n        # \u83b7\u5f97\u6570\u636e\u603b\u91cf\r\n        def __len__(self):\r\n            return self.len\r\n     \r\n     \r\n    dataset = DiabetesDateset('diabetes.csv')\r\n    \r\n    train_loader = DataLoader(dataset=dataset, batch_size=32, shuffle=True, num_workers=2)  \r\n    # num_workers\u4e3a\u591a\u7ebf\u7a0b\r\n     \r\n     \r\n    # Define the model   \u5b9a\u4e49\u6a21\u578b\r\n    \r\n    class FNNModel(torch.nn.Module):\r\n        def __init__(self):\r\n            super(FNNModel, self).__init__()\r\n            self.linear1 = torch.nn.Linear(8, 6)  # \u8f93\u5165\u6570\u636e\u7684\u7279\u5f81\u67098\u4e2a,\u4e5f\u5c31\u662f\u67098\u4e2a\u7ef4\u5ea6,\u968f\u540e\u5c06\u5176\u964d\u7ef4\u52306\u7ef4\r\n            self.linear2 = torch.nn.Linear(6, 4)  # 6\u7ef4\u964d\u52304\u7ef4\r\n            self.linear3 = torch.nn.Linear(4, 2)  # 4\u7ef4\u964d\u52302\u7ef4\r\n            self.linear4 = torch.nn.Linear(2, 1)  # 2w\u7ef4\u964d\u52301\u7ef4\r\n            self.sigmoid = torch.nn.Sigmoid()  # \u53ef\u4ee5\u89c6\u5176\u4e3a\u7f51\u7edc\u7684\u4e00\u5c42,\u800c\u4e0d\u662f\u7b80\u5355\u7684\u51fd\u6570\u4f7f\u7528\r\n     \r\n        def forward(self, x):\r\n            x = self.sigmoid(self.linear1(x))\r\n            x = self.sigmoid(self.linear2(x))\r\n            x = self.sigmoid(self.linear3(x))\r\n            x = self.sigmoid(self.linear4(x))\r\n            return x\r\n     \r\n     \r\n    model = FNNModel()\r\n     \r\n    # Define the criterion and optimizer \u5b9a\u4e49\u4f18\u5316\u548c\u635f\u5931\r\n    criterion = torch.nn.BCELoss(reduction='mean')  # \u8fd4\u56de\u635f\u5931\u7684\u5e73\u5747\u503c\r\n    optimizer = torch.optim.SGD(model.parameters(), lr=0.01)\r\n     \r\n    epoch_list = []\r\n    loss_list = []\r\n     \r\n    # Training  \u8bad\u7ec3\r\n    if __name__ == '__main__': \r\n        for epoch in range(100):\r\n            # i\u662f\u4e00\u4e2aepoch\u4e2d\u7b2c\u51e0\u6b21\u8fed\u4ee3,\u4e00\u5171756\u6761\u6570\u636e,\u6bcf\u4e2amini_batch\u4e3a32,\u6240\u4ee5\u4e00\u4e2aepoch\u9700\u8981\u8fed\u4ee323\u6b21\r\n            # data\u83b7\u53d6\u7684\u6570\u636e\u4e3a(x,y)\r\n            loss_one_epoch = 0\r\n            for i, data in enumerate(train_loader, 0):\r\n                inputs, labels = data    # \u8f93\u5165\u5b9e\u9645\r\n                y_pred = model(inputs)  #  \u9884\u6d4b\u8f93\u5165\r\n                loss = criterion(y_pred, labels)  # \u9884\u6d4b\u5b9e\u9645\r\n                loss_one_epoch += loss.item()\r\n     \r\n                optimizer.zero_grad()\r\n                loss.backward()\r\n                optimizer.step()\r\n            loss_list.append(loss_one_epoch / 23)\r\n            epoch_list.append(epoch)\r\n            print('Epoch[{}/{}],loss:{:.6f}'.format(epoch + 1, 100, loss_one_epoch / 23))\r\n     \r\n        # Drawing\r\n        plt.plot(epoch_list, loss_list)\r\n        plt.xlabel('epoch')\r\n        plt.ylabel('loss')\r\n        plt.show()\n"})}),"\n",(0,t.jsx)(n.h1,{id:"gradio",children:"Gradio"}),"\n",(0,t.jsx)(n.h2,{id:"\u5b89\u88c5gradio",children:"\u5b89\u88c5gradio"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"pip install gradio\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5bfc\u5165gradio",children:"\u5bfc\u5165gradio"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"import gradio as gr\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b",children:"\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:'import gradio as gr\r\n\r\ndef greet(name, intensity):  # \u53c2\u6570\u5217\u8868\u5bf9\u5e94\u8f93\u5165 name\u6587\u672c\u6846\u3001intensity\u6ed1\u5757\r\n    return "Hello, " + name + "!" * int(intensity)   # \u8f93\u51fa\u5bf9\u5e94\uff0c\u6587\u672c\u6846\r\n\r\ndemo = gr.Interface(\r\n    fn=greet ,   # \u6307\u5b9a\u51fd\u6570\r\n    inputs=  ["text", "slider"] ,  # \u6307\u5b9a\u8f93\u5165\u7c7b\u578b\uff1a \u4e00\u4e2a\u6587\u672c\u6846\u3001\u4e00\u4e2a\u6ed1\u5757\r\n    outputs = ["text"], # \u6307\u5b9a\u8f93\u51fa\u7c7b\u578b\r\n)\r\n\r\ndemo.launch()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"grinterface\u7684\u4e09\u5927\u91cd\u8981\u53c2\u6570",children:"gr.Interface()\u7684\u4e09\u5927\u91cd\u8981\u53c2\u6570"}),"\n",(0,t.jsx)(n.p,{children:"Gradio\u7684\u6838\u5fc3\u662fInterface\u7c7b\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u5b9a\u4e49\u8f93\u5165\u548c\u8f93\u51fa\u7c7b\u578b\uff0c\u521b\u5efa\u4ea4\u4e92\u5f0f\u7684Web\u754c\u9762\u3002gr.Interface()\u6709\u4e09\u5927\u91cd\u8981\u53c2\u6570\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"fn\u5904\u7406\u51fd\u6570\uff1a \u7528\u4e8e\u5b9a\u4e49\u5982\u4f55\u6839\u636e\u8f93\u5165\u8fd4\u56de\u8f93\u51fa\u3002"}),"\n",(0,t.jsx)(n.li,{children:"inputs\u8f93\u5165\u5217\u8868\uff1a \u8f93\u5165\u53ef\u4ee5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\uff08\u5217\u8868\uff09\u3002\u6bcf\u4e2a\u5143\u7d20\u652f\u6301\u591a\u79cd\u8f93\u5165\u7c7b\u578b\uff0c\u5982gr.Text()\u7528\u4e8e\u6587\u672c\u8f93\u5165\uff0cgr.Image()\u7528\u4e8e\u56fe\u50cf\u4e0a\u4f20\uff0cgr.Audio()\u7528\u4e8e\u97f3\u9891\u8f93\u5165\u7b49\u3002"}),"\n",(0,t.jsx)(n.li,{children:"outputs\u8f93\u51fa\u5217\u8868\uff1a\u8f93\u51fa\u4f7f\u7528\u51fd\u6570\u7684return\u6307\u5b9a\uff0c\u53ef\u4ee5\u8f93\u51fa\u4e00\u4e2a\u6216\u591a\u4e2a\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"interface\u7684\u5176\u5b83\u53c2\u6570",children:"Interface()\u7684\u5176\u5b83\u53c2\u6570"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"title \uff1a\u6807\u9898"}),"\n",(0,t.jsx)(n.li,{children:"description \uff1a\u63cf\u8ff0"}),"\n",(0,t.jsx)(n.li,{children:"layout\uff1a \u8f93\u5165\u8f93\u51fa\u7ec4\u4ef6\u7684\u5e03\u5c40"}),"\n",(0,t.jsx)(n.li,{children:"theme \u754c\u9762\u4e3b\u9898\u98ce\u683c\uff0c\u5982dark"}),"\n",(0,t.jsx)(n.li,{children:"css \uff1a css\u6837\u5f0f"}),"\n",(0,t.jsx)(n.li,{children:'layout\uff1a \u4f7f\u7528layout="grouped"\u6216layout="stacked"\u6765\u66f4\u6539\u7ec4\u4ef6\u7684\u6392\u5217\u65b9\u5f0f\uff0c\u4f7f\u754c\u9762\u66f4\u52a0\u7d27\u51d1\u6216\u5206\u6563\u3002'}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u6570\u636e\u7c7b\u578b",children:"\u6570\u636e\u7c7b\u578b"}),"\n",(0,t.jsx)(n.p,{children:"\u6587\u672c\u7c7b\uff1a"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,t.jsx)(n.th,{children:"\u7b80\u5199"}),(0,t.jsx)(n.th,{children:"\u542b\u4e49"}),(0,t.jsx)(n.th,{children:"\u53c2\u6570\u5217\u8868"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Text()"}),(0,t.jsx)(n.td,{children:"text"}),(0,t.jsx)(n.td,{children:"\u5355\u884c\u6587\u672c\u8f93\u5165\u6846"}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Textbox()"}),(0,t.jsx)(n.td,{children:"textbox"}),(0,t.jsx)(n.td,{children:"\u5355\u884c\u6587\u672c\u8f93\u5165\u6846"}),(0,t.jsx)(n.td,{children:"default\uff1a\u9ed8\u8ba4\u6587\u672c;placeholder\uff1a\u5360\u4f4d\u7b26\u6587\u672c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Textarea()"}),(0,t.jsx)(n.td,{children:"textarea"}),(0,t.jsx)(n.td,{children:"\u591a\u884c\u6587\u672c\u8f93\u5165\u6846"}),(0,t.jsx)(n.td,{children:"lines\uff1a\u663e\u793a\u884c\u6570\uff0c\u6574\u6570\u503c;placeholder\uff1a \u5360\u4f4d\u7b26\u6587\u672c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Number()"}),(0,t.jsx)(n.td,{children:"number"}),(0,t.jsx)(n.td,{children:"\u6570\u5b57\u8f93\u5165\u6846"}),(0,t.jsx)(n.td,{children:"default\uff1a\u9ed8\u8ba4\u6570\u5b57;label\uff1a\u6807\u7b7e\u6587\u672c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Time()"}),(0,t.jsx)(n.td,{children:"time"}),(0,t.jsx)(n.td,{children:"\u8f93\u5165\u65f6\u95f4"}),(0,t.jsx)(n.td,{children:"label\uff1a\u6807\u7b7e\u6587\u672c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Slider()"}),(0,t.jsx)(n.td,{children:"slider"}),(0,t.jsx)(n.td,{children:"\u6ed1\u52a8\u6761\uff0c\u7528\u4e8e\u9009\u62e9\u4e00\u5b9a\u8303\u56f4\u7684\u6570\u503c"}),(0,t.jsx)(n.td,{children:"minimum\uff1a \u6700\u5c0f\u503c;maximum\uff1a\u6700\u5927;step\uff1a\u6b65\u957f;label\uff1a\u6807\u7b7e\u6587\u672c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Radio()"}),(0,t.jsx)(n.td,{children:"radio"}),(0,t.jsx)(n.td,{children:"\u5355\u9009\u6846"}),(0,t.jsx)(n.td,{children:"choices\uff1a\u5b57\u7b26\u4e32\u6570\u7ec4;label\uff1a \u6807\u7b7e\u6587\u672c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Checkbox()"}),(0,t.jsx)(n.td,{children:"checkbox"}),(0,t.jsx)(n.td,{children:"\u590d\u9009\u6846\uff0c\u5e03\u5c14\u7c7b\u578b"}),(0,t.jsx)(n.td,{children:"label\uff1a\u590d\u9009\u6846\u65c1\u8fb9\u7684\u6587\u672c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.ColorPicker()"}),(0,t.jsx)(n.td,{children:"colorpicker"}),(0,t.jsx)(n.td,{children:"\u9009\u62e9\u989c\u8272\uff0c\u5341\u516d\u8fdb\u5236\u989c\u8272\u4ee3\u7801"}),(0,t.jsx)(n.td,{children:"default\uff1a\u9ed8\u8ba4\u989c\u8272\u503c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Dropdown()"}),(0,t.jsx)(n.td,{children:"dropdown"}),(0,t.jsx)(n.td,{children:"\u4e0b\u62c9\u83dc\u5355"}),(0,t.jsx)(n.td,{children:"choices\uff1a\u5b57\u7b26\u4e32\u6570\u7ec4"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"\u9644\u4ef6\u7c7b\uff1a"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,t.jsx)(n.th,{children:"\u7b80\u5199"}),(0,t.jsx)(n.th,{children:"\u542b\u4e49"}),(0,t.jsx)(n.th,{children:"\u53c2\u6570\u5217\u8868"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.File()"}),(0,t.jsx)(n.td,{children:"file"}),(0,t.jsx)(n.td,{children:"\u4e0a\u4f20\u4efb\u610f\u6587\u4ef6"}),(0,t.jsx)(n.td,{children:"file_count\uff1a \u5141\u8bb8\u4e0a\u4f20\u7684\u6570\u91cf\uff0c\u53d6\u503csingle\uff08\u53ea\u80fd\u4f20\u4e00\u4e2a\uff09\u3001multiple\uff08\u53ef\u4ee5\u4f20\u591a\u4e2a\uff09; type\uff1a \u6570\u636e\u7c7b\u578b\uff0c\u5982file\u3001audio"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Dataframe()"}),(0,t.jsx)(n.td,{children:"dataframe"}),(0,t.jsx)(n.td,{children:"\u4e0a\u4f20csv\u6587\u4ef6\u6216\u8f93\u5165dataframe"}),(0,t.jsx)(n.td,{children:"headers: \u5217\u6807\u9898\u6570\u7ec4; row_count: \u521d\u59cb\u663e\u793a\u7684\u884c\u6570"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Data()"}),(0,t.jsx)(n.td,{children:"data"}),(0,t.jsx)(n.td,{children:"\u4e0a\u4f20\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u7528\u4e8e\u4e0a\u4f20\u97f3\u9891\u6216\u89c6\u9891\u7684\u539f\u59cb\u5b57\u8282"}),(0,t.jsx)(n.td,{children:"type\uff1a\u7c7b\u578b\uff0c\u53ef\u4ee5\u662f auto \u81ea\u52a8\u63a8\u65ad"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Image()"}),(0,t.jsx)(n.td,{children:"image"}),(0,t.jsx)(n.td,{children:"\u4e0a\u4f20\u56fe\u7247\uff0c\u652f\u6301\u591a\u79cd\u56fe\u50cf\u683c\u5f0f"}),(0,t.jsx)(n.td,{children:"type\uff1a \u56fe\u50cf\u7c7b\u578b\uff0c\u5982pil"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Video()"}),(0,t.jsx)(n.td,{children:"video"}),(0,t.jsx)(n.td,{children:"\u4e0a\u4f20\u89c6\u9891"}),(0,t.jsx)(n.td,{children:"label\uff1a\u6807\u7b7e\u6587\u672c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"gr.Audio()"}),(0,t.jsx)(n.td,{children:"audio"}),(0,t.jsx)(n.td,{children:"\u4e0a\u4f20\u97f3\u9891"}),(0,t.jsx)(n.td,{children:"source\uff1a\u6307\u5b9a\u97f3\u9891\u6765\u6e90;type\uff1a\u6307\u5b9a\u8fd4\u56de\u7c7b\u578b;label\uff1a\u6807\u7b7e\u6587\u672c"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u8f93\u51fa\u7ec4\u4ef6\u7684\u7c7b\u578b",children:"\u8f93\u51fa\u7ec4\u4ef6\u7684\u7c7b\u578b"}),"\n",(0,t.jsx)(n.p,{children:"\u8f93\u51fa\u7ec4\u4ef6\u7684\u7c7b\u578b\u9664\u4e86\u5305\u62ec\u4e0a\u9762\u8868\u683c\u4e2d\u7684\u7c7b\u578b\u4ee5\u5916\uff0c\u8fd8\u5305\u62ec\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Carousel\uff1a\u4ee5\u8f6e\u64ad\u65b9\u5f0f\u5c55\u793a\u591a\u4e2a\u8f93\u51fa\uff0c\u9002\u7528\u4e8e\u56fe\u50cf\u96c6\u591a\u4e2a\u6570\u636e\u70b9\u3002\u53c2\u6570\uff1aitem_type \u8bbe\u7f6e\u8f6e\u64ad\u9879\u76ee\u7c7b\u578b\u3002\u4f8b\uff1agr.Carousel(item_type="image")'}),"\n",(0,t.jsx)(n.li,{children:"Gallery\uff1a\u4ee5\u753b\u5eca\u5f62\u5f0f\u5c55\u793a\u4e00\u7cfb\u5217\u56fe\u50cf\u3002"}),"\n",(0,t.jsx)(n.li,{children:"HTML\uff1a\u5c55\u793aHTML\u5185\u5bb9\uff0c\u9002\u7528\u4e8e\u5bcc\u6587\u672c\u6216\u7f51\u9875\u5e03\u5c40\u3002"}),"\n",(0,t.jsx)(n.li,{children:'Image\uff1a\u5c55\u793a\u56fe\u50cf\u3002\u53c2\u6570\uff1atype \u6307\u5b9a\u56fe\u50cf\u683c\u5f0f\u3002 \u4f8b\uff1agr.Image(type="pil")'}),"\n",(0,t.jsx)(n.li,{children:"JSON\uff1a\u4ee5JSON\u683c\u5f0f\u5c55\u793a\u6570\u636e\uff0c\u4fbf\u4e8e\u67e5\u770b\u7ed3\u6784\u5316\u6570\u636e\u3002"}),"\n",(0,t.jsx)(n.li,{children:"KeyValues\uff1a\u4ee5\u952e\u503c\u5bf9\u5f62\u5f0f\u5c55\u793a\u6570\u636e\u3002"}),"\n",(0,t.jsx)(n.li,{children:"Label\uff1a\u5c55\u793a\u6587\u672c\u6807\u7b7e\uff0c\u9002\u7528\u4e8e\u7b80\u5355\u7684\u6587\u672c\u8f93\u51fa\u3002"}),"\n",(0,t.jsx)(n.li,{children:"Markdown\uff1a\u652f\u6301Markdown\u683c\u5f0f\u7684\u6587\u672c\u5c55\u793a\u3002"}),"\n",(0,t.jsx)(n.li,{children:"Plot\uff1a\u5c55\u793a\u56fe\u8868\uff0c\u5982matplotlib\u751f\u6210\u7684\u56fe\u8868\u3002"}),"\n",(0,t.jsx)(n.li,{children:"Text\uff1a\u7528\u4e8e\u663e\u793a\u6587\u672c\uff0c\u9002\u5408\u8f83\u957f\u7684\u8f93\u51fa\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"gradio\u96c6\u6210\u5927\u6a21\u578b",children:"Gradio\u96c6\u6210\u5927\u6a21\u578b"}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u4e0b\u4ee3\u7801\u96c6\u6210\u4e86HuggingFace\u7684\u56fe\u50cf\u5206\u7c7b\u6a21\u578b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"import gradio as gr\r\nfrom transformers import pipeline\r\n\r\n# \u52a0\u8f7dHuggingface\u4e0a\u7684\u9884\u8bad\u7ec3\u6a21\u578b\r\nmodel = pipeline('image-classification')\r\n\r\n# \u5b9a\u4e49\u5904\u7406\u51fd\u6570\r\ndef classify_image(img):\r\n    return {i['label']: i['score'] for i in model(img)}\r\n\r\n# \u521b\u5efaGradio\u754c\u9762\r\niface = gr.Interface(\r\n    fn=classify_image,\r\n    inputs=gr.Image(type=\"pil\"),   ## \u56fe\u7247\u7c7b\u578b\r\n    outputs=gr.Label(num_top_classes=5))\r\niface.launch()\r\n\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Gradio",src:r(1791).A+"",width:"1140",height:"439"})}),"\n",(0,t.jsx)(n.h1,{id:"stable-diffusion",children:"Stable Diffusion"}),"\n",(0,t.jsx)(n.h2,{id:"ai\u7ed8\u753b\u7684\u5e94\u7528\u573a\u666f",children:"AI\u7ed8\u753b\u7684\u5e94\u7528\u573a\u666f"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u4eba\u7269","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6362\u8138"}),"\n",(0,t.jsx)(n.li,{children:"\u6362\u88c5"}),"\n",(0,t.jsx)(n.li,{children:"\u6362\u59ff\u52bf"}),"\n",(0,t.jsx)(n.li,{children:"\u6362\u8868\u60c5"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"\u62a0\u56fe"}),"\n",(0,t.jsx)(n.li,{children:"\u5c40\u90e8\u91cd\u7ed8"}),"\n",(0,t.jsx)(n.li,{children:"\u653e\u5927"}),"\n",(0,t.jsx)(n.li,{children:"\u6362\u80cc\u666f"}),"\n",(0,t.jsx)(n.li,{children:"\u6362\u989c\u8272"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"stable-diffusion-1",children:"Stable Diffusion"}),"\n",(0,t.jsx)(n.h3,{id:"sd\u7684\u53d1\u5e03\u65f6\u95f4",children:"SD\u7684\u53d1\u5e03\u65f6\u95f4"}),"\n",(0,t.jsx)(n.p,{children:"1.0\u53d1\u5e03\u4e8e2022\u5e749\u6708\uff0c2.0\u53d1\u5e03\u4e8e2022\u5e7411\u6708\uff0c3.0\u53d1\u5e03\u4e8e2024\u5e745\u6708\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"sdxl\u7b80\u4ecb",children:"SDXL\u7b80\u4ecb"}),"\n",(0,t.jsx)(n.p,{children:"SDXL \u5c31\u662f SD \u7684\u5347\u7ea7\u7248\uff0c\u56fe\u7247\u751f\u6210\u7684\u6548\u679c\u66f4\u597d\u3001\u66f4\u903c\u771f\u3001\u5206\u8fa8\u7387\u66f4\u9ad8\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"sd\u7684\u4e3b\u8981\u539f\u7406",children:"SD\u7684\u4e3b\u8981\u539f\u7406"}),"\n",(0,t.jsx)(n.p,{children:"\u5c06\u8f93\u5165\uff08\u6587\u672c\u6216\u56fe\u7247\uff09\u5411\u91cf\u5316 \u2014\u2014>    \u901a\u8fc7VAE\u538b\u7f29\u5230Latent\u9690\u7a7a\u95f4 \u2014\u2014>  \u5728\u9690\u7a7a\u95f4\u4e2d\u591a\u6b21\u53bb\u566a \u2014\u2014> \u901a\u8fc7VAE\u89e3\u7801\u8fd8\u539f\u5230\u50cf\u7d20\u7a7a\u95f4"}),"\n",(0,t.jsx)(n.h3,{id:"\u4ece-u-net-\u5230transformer",children:"\u4ece U-Net \u5230Transformer"}),"\n",(0,t.jsx)(n.p,{children:"\u7531\u4e8e\u81ea\u6ce8\u610f\u529b\u7684\u53ef\u6269\u5c55\u6027\u3001\u5f3a\u5927\u7684\u6027\u80fd\uff0c\u6269\u6563\u6a21\u578b\u80cc\u540e\u7684\u9aa8\u5e72\u7f51\u7edc\uff0c\u5df2\u7ecf\u7531U-Net\u66ff\u6362\u6210\u4e86Transformer\u67b6\u6784\u3002Transformer \u5df2\u7136\u5b8c\u6210\u4e86\u6df1\u5ea6\u5b66\u4e60\u9886\u57df\u7684\u5927\u4e00\u7edf\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u9690\u7a7a\u95f4\u7684\u4f5c\u7528",children:"\u9690\u7a7a\u95f4\u7684\u4f5c\u7528"}),"\n",(0,t.jsx)(n.p,{children:"\u9690\u7a7a\u95f4\u901a\u4fd7\u6765\u8bf4\u5c06\u56fe\u7247\u6570\u636e\u91cf\u538b\u7f29\uff0c\u8fd9\u6837\u4fbf\u4e8e\u63d0\u5347\u8bad\u7ec3\u548c\u63a8\u7406\u7684\u6027\u80fd\u3002\u7c7b\u4f3c\u4e8e\u89c6\u9891\u5e27\u7684\u538b\u7f29\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"sd\u5e94\u7528\u7684\u4e3b\u8981\u6587\u4ef6\u5939",children:"SD\u5e94\u7528\u7684\u4e3b\u8981\u6587\u4ef6\u5939"}),"\n",(0,t.jsx)(n.p,{children:"\u91cd\u70b9\u5173\u6ce8\u51e0\u4e2a\u6587\u4ef6\u5939\uff1a checkpoint \u5927\u6a21\u578b\u6587\u4ef6\u5939 \u3001 embeddings \u5411\u91cf\u5316\u3001Lora\u5fae\u8c03\u3001VAE\u53d8\u5206\u81ea\u7f16\u7801\u5668\u3001 ControlNet\u63d2\u4ef6\u3001Custom Nodes \u81ea\u5b9a\u4e49\u8282\u70b9"}),"\n",(0,t.jsx)(n.h2,{id:"lora\u8bad\u7ec3",children:"LoRA\u8bad\u7ec3"}),"\n",(0,t.jsx)(n.h3,{id:"repeatepochbatch_size\u7684\u533a\u522b",children:"repeat\u3001epoch\u3001batch_size\u7684\u533a\u522b"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"repeat\u3001epoch\u3001batch_size",src:r(8041).A+"",width:"1200",height:"293"})}),"\n",(0,t.jsx)(n.h3,{id:"\u5b66\u4e60\u7387",children:"\u5b66\u4e60\u7387"}),"\n",(0,t.jsx)(n.p,{children:"\u5b66\u4e60\u7387\u7c7b\u4f3c\u4e8e\u8f66\u901f\u3002\u5b66\u4e60\u7387\u8fc7\u9ad8\uff0c\u5b66\u7684\u592a\u5feb\uff0c\u56eb\u56f5\u541e\u67a3\uff0c\u53ef\u80fd\u4f1a\u8fc7\u62df\u5408\u3002\u5b66\u4e60\u7387\u592a\u4f4e\uff0c\u53ef\u4ee5\u66f4\u597d\u770b\u6e05\u8def\u4e0a\u7684\u98ce\u666f\uff0c\u4e5f\u5c31\u662fAI\u53ef\u4ee5\u66f4\u7ec6\u81f4\u7684\u53bb\u5b66\u4e60\uff0c\u4f46\u662f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e0d\u62df\u5408\uff0c\u4e5f\u5c31\u662f\u51fa\u56fe\u5b8c\u5168\u4e0d\u50cf\uff0c\u5b66\u7684\u592a\u6162\u4e86\uff0c\u5e76\u4e14\u82b1\u8d39\u7684\u65f6\u95f4\u66f4\u591a\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5b66\u4e60\u7387\u9ed8\u8ba4\u503c1e-4\uff0c\u53730.0001\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u6253tag",children:"\u6253tag"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5982\u679c\u662f\u5e0c\u671b\u7075\u6d3b\u8c03\u6574\u7684\u7279\u5f81\uff0c\u90fd\u5fc5\u987b\u628atag\u6253\u6e05\u695a"}),"\u3002\u5982\u679c\u662f\u56fa\u5316\u5728\u6a21\u578b\u91cc\u9762\u7684\u7279\u5f81\uff0c\u90fd\u4e0d\u8981\u53bb\u6253tag\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5e0c\u671b\u5934\u53d1\u989c\u8272\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u5219\u5fc5\u987b\u5199\u660e red hair \uff0c\u5982\u679c\u4e0d\u5199\u660e\uff0c\u5c06\u6765AI\u4f1a\u8ba4\u4e3a\u201c\u4eba\u7c7b\u7684\u5934\u53d1\u5c31\u662f\u7ea2\u8272\u7684\u201d\uff0c\u5c06\u6765\u6240\u6709\u751f\u6210\u7684\u56fe\u7247\u90fd\u5c06\u662f\u7ea2\u8272\u5934\u53d1\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u63d0\u793a\u8bcd",children:"\u63d0\u793a\u8bcd"}),"\n",(0,t.jsx)(n.h3,{id:"\u6743\u91cd\u8bed\u6cd5",children:"\u6743\u91cd\u8bed\u6cd5"}),"\n",(0,t.jsx)(n.p,{children:"SD\u6743\u91cd\u8bed\u6cd5\u6c47\u603b\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u8bed\u6cd5"}),(0,t.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"prompt"})}),(0,t.jsx)(n.td,{children:"\u6ca1\u6709\u4efb\u4f55\u7b26\u53f7\uff0c\u9ed8\u8ba4\u60c5\u51b5\uff0c1\u500d\u7684\u6743\u91cd"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"(prompt)"})}),(0,t.jsx)(n.td,{children:"\u589e\u52a0\u6743\u91cd\uff0c1\u5c42\u4e3a1.1\u500d\uff0c2\u5c42\u4e3a1.21\u500d\uff0c3\u5c42\u4e3a1.331\u500d"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"(prompt: x)"})}),(0,t.jsx)(n.td,{children:"\u81ea\u5b9a\u4e49\u6743\u91cd\uff0cx\u6700\u597d\u63a7\u5236\u57280.4~1.6\u4e4b\u95f4\u3002\u592a\u5c0f\u5bb9\u6613\u88ab\u5ffd\u89c6\uff0c\u592a\u5927\u5bb9\u6613\u62df\u5408\u56fe\u50cf\u51fa\u9519"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[prompt]"})}),(0,t.jsx)(n.td,{children:"\u964d\u4f4e\u6743\u91cd\u30021\u5c42\u4e2d\u62ec\u53f7\u4e3a0.9\u500d\uff0c3\u5c42\u4e2d\u62ec\u53f7\u4e3a0.729\u500d"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"{prompt}"})}),(0,t.jsx)(n.td,{children:"\u8f7b\u5fae\u589e\u52a0\u6743\u91cd\u30021\u5c42\u82b1\u62ec\u53f7\u4e3a1.05\u500d\uff0c\u4e09\u5c42\u5927\u62ec\u53f7\u4e3a1.15\u500d"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[prompt1 and prompt2]"})}),(0,t.jsxs)(n.td,{children:["prompt1\u548cprompt2\u7684\u6df7\u5408\uff0c\u4f8b\u5982",(0,t.jsx)(n.code,{children:"[hot and dog]"}),"\u8868\u793a\u5728\u706b\u4e2d\u7684\u72d7"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[prompt1_prompt2]"})}),(0,t.jsxs)(n.td,{children:["\u7ec4\u5408\u8bed\u6cd5\u3002\u6bd4\u5982",(0,t.jsx)(n.code,{children:"[coffee_cake]"}),"\u8868\u793a\u5496\u5561\u86cb\u7cd5\uff0c\u65e2\u4e0d\u662f\u751f\u6210\u5496\u5561\uff0c\u4e5f\u4e0d\u662f\u751f\u6210\u86cb\u7cd5\u3002"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[prompt:0.8]"})}),(0,t.jsx)(n.td,{children:"\u572880%\u65f6\u523b\u624d\u5f00\u59cb\u751f\u6210prompt\uff0c\u524d\u9762\u7684\u65f6\u95f4\u8ddf\u8be5prompt\u65e0\u5173"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[prompt::0.8]"})}),(0,t.jsx)(n.td,{children:"\u524d80%\u65f6\u95f4\u6bb5\u751f\u6210prompt\uff0c\u540e\u9762\u7684\u65f6\u95f4\u8ddf\u8be5prompt\u65e0\u5173"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[prompt1:prompt2:0.8]"})}),(0,t.jsx)(n.td,{children:"\u524d80%\u7684\u65f6\u95f4\u6e32\u67d3prompt1\uff0c\u540e20%\u7684\u65f6\u95f4\u6e32\u67d3prompt2"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[prompt1 | prompt2 | prompt3]"})}),(0,t.jsx)(n.td,{children:"\u5faa\u73af\u5f80\u590d\uff0c\u4ea4\u66ff\u91c7\u6837\u3002\u5982\u679c\u4f60\u60f3\u628a\u4e24\u79cd\uff0c\u5c06\u591a\u79cd\u4e1c\u897f\u878d\u5408\u6210\u4e00\u79cd\uff0c\u6bd4\u5982\u989c\u8272\u6e10\u53d8\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[prompt1 break prompt2] "})}),(0,t.jsx)(n.td,{children:"\u5728\u4e24\u4e2a\u63d0\u793a\u8bcd\u4e2d\u95f4\u5199\u4e0a\u201cbreak\u201d\uff0c\u4f5c\u7528\u5c31\u662f\u628a\u4e24\u4e2a\u8bcd\u5b8c\u5168\u9694\u79bb\u5f00\uff0c\u907f\u514d\u63d0\u793a\u8bcd\u4e4b\u95f4\u7684\u6c61\u67d3\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"prompt1 AND prompt2"})}),(0,t.jsx)(n.td,{children:"\u7ec4\u5408\u63d0\u793a\u8bcd\uff0cAND\u5fc5\u987b\u5927\u5199\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60f3\u8981\u5934\u53d1\u53c8\u6709\u7d2b\u8272\u53c8\u6709\u7eff\u8272\uff0c\u5219 purple hair AND green hair\u3002"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"sora",children:"Sora"}),"\n",(0,t.jsx)(n.h3,{id:"sora\u7b80\u4ecb",children:"Sora\u7b80\u4ecb"}),"\n",(0,t.jsx)(n.p,{children:"Sora \u7531OpenAI\u53d1\u5e03\u4e8e2024\u5e742\u6708\u4efd\uff0c\u4e00\u7ecf\u53d1\u5e03\u5c31\u8f70\u52a8\u4e86\u4e16\u754c\u3002"}),"\n",(0,t.jsx)(n.p,{children:"Sora\u662f\u4e00\u79cd\u6587\u751f\u89c6\u9891\u5927\u6a21\u578b\uff0c\u4f46OpenAI\u7684\u91ce\u5fc3\u4e0d\u6b62\u4e8e\u6b64\uff0c\u5b98\u7f51\u7684\u526f\u6807\u9898\u662f\u201cWord Simulator\uff08\u4e16\u754c\u6a21\u62df\u5668\uff09\u201d\u3002\u56e0\u4e3aSora\u5728\u4f7f\u7528\u5927\u91cf\u7684\u89c6\u9891\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5b66\u4e60\u5230\u4e86\u5ba2\u89c2\u4e16\u754c\u7684\u7269\u7406\u89c4\u5f8b\uff0c\u4f8b\u5982\u884c\u8d70\u3001\u81ea\u7531\u843d\u4f53\u3001\u89c6\u89d2\u53d8\u6362\u3001\u8fd1\u5927\u8fdc\u5c0f\u7b49\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"sora\u6709\u671b\u63a8\u52a8\u673a\u5668\u4eba\u7684\u53d1\u5c55",children:"Sora\u6709\u671b\u63a8\u52a8\u673a\u5668\u4eba\u7684\u53d1\u5c55"}),"\n",(0,t.jsx)(n.p,{children:"Sora\u63a8\u51fa\u4e4b\u6240\u4ee5\u8f70\u52a8\uff0c\u4e0d\u662f\u56e0\u4e3a\u5b83\u662f\u6587\u751f\u89c6\u9891\uff0c\u800c\u662f\u56e0\u4e3a\u5b83\u901a\u8fc7\u89c2\u770b\u5927\u91cf\u7684\u89c6\u9891\uff0c\u7406\u89e3\u4e86\u771f\u5b9e\u4e16\u754c\u7684\u7269\u7406\u89c4\u5f8b\u3002\u8fd9\u5c31\u662f\u201c\u6d8c\u73b0\u201d\u80fd\u529b\uff0c\u9664\u4e86\u6587\u751f\u89c6\u9891\u5e26\u52a8\u89c6\u9891\u76f8\u5173\u884c\u4e1a\u7684\u98a0\u8986\uff0c\u8fd8\u6709\u4e24\u4e2a\u66f4\u91cd\u8981\u7684\u4ef7\u503c\uff1a \u901a\u8fc7AGI\u7684\u9014\u5f84\u4e4b\u4e00\uff08\u591a\u79cd\u6a21\u6001\uff09\u3001 \u76f4\u63a5\u7528\u5728\u673a\u5668\u4eba\u4e0a\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"svd",children:"SVD"}),"\n",(0,t.jsx)(n.h3,{id:"stable-video-diffusion\u7b80\u4ecb",children:"Stable Video Diffusion\u7b80\u4ecb"}),"\n",(0,t.jsx)(n.p,{children:"Stable Video Diffusion\uff0c\u7b80\u79f0SVD\uff0c\u7531StabilityAI\u53d1\u5e03\u4e8e2023\u5e7411\u6708\uff0c\u5f00\u6e90\uff0c\u80fd\u591f\u751f\u6210\u5e27\u7387 14\u3001\u5206\u8fa8\u7387 576x1024 \u7684\u89c6\u9891\u3002"}),"\n",(0,t.jsx)(n.p,{children:"SVD-XT\u662fSVD \u7684\u5fae\u8c03\u5347\u7ea7\u7248\uff0c\u5206\u8fa8\u7387\u4e0d\u53d8\uff0c\u4f46\u80fd\u591f\u751f\u6210\u5e27\u7387 25 \u7684\u89c6\u9891\uff1b"}),"\n",(0,t.jsx)(n.h3,{id:"svd\u7684\u8bad\u7ec3\u8fc7\u7a0b",children:"SVD\u7684\u8bad\u7ec3\u8fc7\u7a0b"}),"\n",(0,t.jsx)(n.p,{children:"\u5148\u641c\u96c6\u4e865.8\u4ebf\u4e2a\u89c6\u9891\u526a\u8f91\u3002\u7ecf\u8fc7\u5c42\u5c42\u7b5b\u9009\uff0c\u6700\u540e\u4fdd\u7559\u4e861.5\u4ebf\u4e2a\u89c6\u9891\u7247\u6bb5\u7684\u8d85\u9ad8\u8d28\u91cf\u6570\u636e\u96c6\u3002"}),"\n",(0,t.jsx)(n.p,{children:"SVD\u7684\u8bad\u7ec3\u5206\u4e3a\u4e09\u4e2a\u4e3b\u8981\u6b65\u9aa4\uff1a \u6587\u751f\u56fe\u9884\u8bad\u7ec3\u3001 \u89c6\u9891\u751f\u6210\u9884\u8bad\u7ec3\u3001 \u9ad8\u8d28\u91cf\u89c6\u9891\u5fae\u8c03\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"svd\u914d\u5408comfyui",children:"SVD\u914d\u5408ComfyUI"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"ComfyUI-SVD",src:r(8923).A+"",width:"1776",height:"1037"})}),"\n",(0,t.jsx)(n.h1,{id:"transformer",children:"Transformer"}),"\n",(0,t.jsx)(n.h2,{id:"transformer-\u793a\u610f\u56fe",children:"Transformer \u793a\u610f\u56fe"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Transformer\u793a\u610f\u56fe",src:r(3049).A+""})}),"\n",(0,t.jsx)(n.h2,{id:"transformer-\u6e90\u7801",children:"Transformer \u6e90\u7801"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"import numpy as np\r\nimport torch\r\nimport torch.nn as nn\r\nimport torch.optim as optim\r\nimport matplotlib.pyplot as plt\r\n\r\ndef make_batch(sentences):\r\n    input_batch = [[src_vocab[n] for n in sentences[0].split()]]\r\n    output_batch = [[tgt_vocab[n] for n in sentences[1].split()]]\r\n    target_batch = [[tgt_vocab[n] for n in sentences[2].split()]]\r\n    return torch.LongTensor(input_batch), torch.LongTensor(output_batch), torch.LongTensor(target_batch)\r\n\r\ndef get_sinusoid_encoding_table(n_position, d_model):\r\n    def cal_angle(position, hid_idx):\r\n        return position / np.power(10000, 2 * (hid_idx // 2) / d_model)\r\n    def get_posi_angle_vec(position):\r\n        return [cal_angle(position, hid_j) for hid_j in range(d_model)]\r\n\r\n    sinusoid_table = np.array([get_posi_angle_vec(pos_i) for pos_i in range(n_position)])\r\n    sinusoid_table[:, 0::2] = np.sin(sinusoid_table[:, 0::2])  # dim 2i\r\n    sinusoid_table[:, 1::2] = np.cos(sinusoid_table[:, 1::2])  # dim 2i+1\r\n    return torch.FloatTensor(sinusoid_table)\r\n\r\ndef get_attn_pad_mask(seq_q, seq_k):\r\n    batch_size, len_q = seq_q.size()\r\n    batch_size, len_k = seq_k.size()\r\n    # eq(zero) is PAD token\r\n    pad_attn_mask = seq_k.data.eq(0).unsqueeze(1)  # batch_size x 1 x len_k(=len_q), one is masking\r\n    return pad_attn_mask.expand(batch_size, len_q, len_k)  # batch_size x len_q x len_k\r\n\r\ndef get_attn_subsequent_mask(seq):\r\n    attn_shape = [seq.size(0), seq.size(1), seq.size(1)]\r\n    subsequent_mask = np.triu(np.ones(attn_shape), k=1)\r\n    subsequent_mask = torch.from_numpy(subsequent_mask).byte()\r\n    return subsequent_mask\r\n\r\nclass ScaledDotProductAttention(nn.Module):\r\n    def __init__(self):\r\n        super(ScaledDotProductAttention, self).__init__()\r\n    def forward(self, Q, K, V, attn_mask):\r\n        scores = torch.matmul(Q, K.transpose(-1, -2)) / np.sqrt(d_k) # scores : [batch_size x n_heads x len_q(=len_k) x len_k(=len_q)]\r\n        scores.masked_fill_(attn_mask, -1e9) # Fills elements of self tensor with value where mask is one.\r\n        attn = nn.Softmax(dim=-1)(scores)\r\n        context = torch.matmul(attn, V)\r\n        return context, attn\r\n\r\nclass MultiHeadAttention(nn.Module):\r\n    def __init__(self):\r\n        super(MultiHeadAttention, self).__init__()\r\n        self.W_Q = nn.Linear(d_model, d_k * n_heads)\r\n        self.W_K = nn.Linear(d_model, d_k * n_heads)\r\n        self.W_V = nn.Linear(d_model, d_v * n_heads)\r\n        self.linear = nn.Linear(n_heads * d_v, d_model)\r\n        self.layer_norm = nn.LayerNorm(d_model)\r\n\r\n    def forward(self, Q, K, V, attn_mask):\r\n        # q: [batch_size x len_q x d_model], k: [batch_size x len_k x d_model], v: [batch_size x len_k x d_model]\r\n        residual, batch_size = Q, Q.size(0)\r\n        # (B, S, D) -proj-> (B, S, D) -split-> (B, S, H, W) -trans-> (B, H, S, W)\r\n        q_s = self.W_Q(Q).view(batch_size, -1, n_heads, d_k).transpose(1,2)  # q_s: [batch_size x n_heads x len_q x d_k]\r\n        k_s = self.W_K(K).view(batch_size, -1, n_heads, d_k).transpose(1,2)  # k_s: [batch_size x n_heads x len_k x d_k]\r\n        v_s = self.W_V(V).view(batch_size, -1, n_heads, d_v).transpose(1,2)  # v_s: [batch_size x n_heads x len_k x d_v]\r\n        attn_mask = attn_mask.unsqueeze(1).repeat(1, n_heads, 1, 1) # attn_mask : [batch_size x n_heads x len_q x len_k]\r\n        # context: [batch_size x n_heads x len_q x d_v], attn: [batch_size x n_heads x len_q(=len_k) x len_k(=len_q)]\r\n        context, attn = ScaledDotProductAttention()(q_s, k_s, v_s, attn_mask)\r\n        context = context.transpose(1, 2).contiguous().view(batch_size, -1, n_heads * d_v) \r\n            # context: [batch_size x len_q x n_heads * d_v]\r\n        output = self.linear(context)\r\n        return self.layer_norm(output + residual), attn # output: [batch_size x len_q x d_model]\r\n\r\nclass PoswiseFeedForwardNet(nn.Module):\r\n    def __init__(self):\r\n        super(PoswiseFeedForwardNet, self).__init__()\r\n        self.conv1 = nn.Conv1d(in_channels=d_model, out_channels=d_ff, kernel_size=1)\r\n        self.conv2 = nn.Conv1d(in_channels=d_ff, out_channels=d_model, kernel_size=1)\r\n        self.layer_norm = nn.LayerNorm(d_model)\r\n    def forward(self, inputs):\r\n        residual = inputs # inputs : [batch_size, len_q, d_model]\r\n        output = nn.ReLU()(self.conv1(inputs.transpose(1, 2)))\r\n        output = self.conv2(output).transpose(1, 2)\r\n        return self.layer_norm(output + residual)\r\n\r\n\r\n\r\nclass EncoderLayer(nn.Module):\r\n\r\n    def __init__(self):\r\n        super(EncoderLayer, self).__init__()\r\n        self.enc_self_attn = MultiHeadAttention()\r\n        self.pos_ffn = PoswiseFeedForwardNet()\r\n\r\n    def forward(self, enc_inputs, enc_self_attn_mask):\r\n        enc_outputs, attn = self.enc_self_attn(enc_inputs, enc_inputs, enc_inputs, enc_self_attn_mask) \r\n            # enc_inputs to same Q,K,V\r\n        enc_outputs = self.pos_ffn(enc_outputs) # enc_outputs: [batch_size x len_q x d_model]\r\n        return enc_outputs, attn\r\n\r\n\r\n\r\nclass DecoderLayer(nn.Module):\r\n\r\n    def __init__(self):\r\n        super(DecoderLayer, self).__init__()\r\n        self.dec_self_attn = MultiHeadAttention()\r\n        self.dec_enc_attn = MultiHeadAttention()\r\n        self.pos_ffn = PoswiseFeedForwardNet()\r\n\r\n    def forward(self, dec_inputs, enc_outputs, dec_self_attn_mask, dec_enc_attn_mask):\r\n        dec_outputs, dec_self_attn = self.dec_self_attn(dec_inputs, dec_inputs, dec_inputs, dec_self_attn_mask)\r\n        dec_outputs, dec_enc_attn = self.dec_enc_attn(dec_outputs, enc_outputs, enc_outputs, dec_enc_attn_mask)\r\n        dec_outputs = self.pos_ffn(dec_outputs)\r\n        return dec_outputs, dec_self_attn, dec_enc_attn\r\n\r\n\r\n##### \u7f16\u7801\u5668\r\n\r\n\r\nclass Encoder(nn.Module):\r\n\r\n    def __init__(self):\r\n        super(Encoder, self).__init__()\r\n        # \u5c06\u8f93\u5165\u5355\u8bcd\u8fdb\u884cEmbedding\r\n        self.src_emb = nn.Embedding(src_vocab_size, d_model) # src_vocab_size\uff1a\u8bcd\u8868\u5927\u5c0f\uff1bd_model\uff1a\u5d4c\u5165\u7ef4\u5ea6\r\n        # \u6dfb\u52a0\u4f4d\u7f6e\u7f16\u7801\r\n        self.pos_emb = nn.Embedding.from_pretrained(get_sinusoid_encoding_table(src_len+1, d_model),freeze=True)\r\n        # \u524d\u9988\u795e\u7ecf\u7f51\u7edc\r\n        self.layers = nn.ModuleList([EncoderLayer() for _ in range(n_layers)])\r\n\r\n    def forward(self, enc_inputs): # enc_inputs : [batch_size x source_len]\r\n        # \u8bcd\u5411\u91cf \u548c \u4f4d\u7f6e\u7f16\u7801\u8fdb\u884c\u76f8\u52a0\r\n        enc_outputs = self.src_emb(enc_inputs) + self.pos_emb(torch.LongTensor([[1,2,3,4,0]]))\r\n        #\r\n        enc_self_attn_mask = get_attn_pad_mask(enc_inputs, enc_inputs)\r\n        enc_self_attns = []\r\n        for layer in self.layers:\r\n            enc_outputs, enc_self_attn = layer(enc_outputs, enc_self_attn_mask)\r\n            enc_self_attns.append(enc_self_attn)\r\n        return enc_outputs, enc_self_attns\r\n\r\n\r\nclass Decoder(nn.Module):\r\n\r\n    def __init__(self):\r\n        super(Decoder, self).__init__()\r\n        self.tgt_emb = nn.Embedding(tgt_vocab_size, d_model)\r\n        self.pos_emb = nn.Embedding.from_pretrained(get_sinusoid_encoding_table(tgt_len+1, d_model),freeze=True)\r\n        self.layers = nn.ModuleList([DecoderLayer() for _ in range(n_layers)])\r\n\r\n    def forward(self, dec_inputs, enc_inputs, enc_outputs): # dec_inputs : [batch_size x target_len]\r\n        dec_outputs = self.tgt_emb(dec_inputs) + self.pos_emb(torch.LongTensor([[5,1,2,3,4]]))\r\n        dec_self_attn_pad_mask = get_attn_pad_mask(dec_inputs, dec_inputs)\r\n        dec_self_attn_subsequent_mask = get_attn_subsequent_mask(dec_inputs)\r\n        dec_self_attn_mask = torch.gt((dec_self_attn_pad_mask + dec_self_attn_subsequent_mask), 0)\r\n        dec_enc_attn_mask = get_attn_pad_mask(dec_inputs, enc_inputs)\r\n        dec_self_attns, dec_enc_attns = [], []\r\n        for layer in self.layers:\r\n            dec_outputs, dec_self_attn, dec_enc_attn = layer(dec_outputs, enc_outputs, dec_self_attn_mask, dec_enc_attn_mask)\r\n            dec_self_attns.append(dec_self_attn)\r\n            dec_enc_attns.append(dec_enc_attn)\r\n        return dec_outputs, dec_self_attns, dec_enc_attns\r\n\r\n\r\nclass Transformer(nn.Module):\r\n\r\n    def __init__(self):\r\n        super(Transformer, self).__init__()\r\n        # \u7f16\u7801\u5668\r\n        self.encoder = Encoder()\r\n        # \u89e3\u7801\u5668\r\n        self.decoder = Decoder()\r\n        # \u89e3\u7801\u5668\u6700\u540e\u7684\u5206\u7c7b\u5668\uff0c\u5206\u7c7b\u5668\u7684\u8f93\u5165d_model\u662f\u89e3\u7801\u5c42\u6bcf\u4e2atoken\u7684\u8f93\u51fa\u7ef4\u5ea6\u5927\u5c0f\uff0c\r\n            # \u9700\u8981\u5c06\u5176\u8f6c\u4e3a\u8bcd\u8868\u5927\u5c0f\uff0c\u518d\u8ba1\u7b97softmax\uff1b\u8ba1\u7b97\u54ea\u4e2a\u8bcd\u51fa\u73b0\u7684\u6982\u7387\u6700\u5927\r\n        self.projection = nn.Linear(d_model, tgt_vocab_size, bias=False)\r\n\r\n    def forward(self, enc_inputs, dec_inputs):\r\n        #  Transformer\u7684\u4e24\u4e2a\u8f93\u5165\uff0c\u4e00\u4e2a\u662f\u7f16\u7801\u5668\u7684\u8f93\u5165\uff08\u6e90\u5e8f\u5217\uff09\uff0c\u4e00\u4e2a\u662f\u89e3\u7801\u5668\u7684\u8f93\u5165\uff08\u76ee\u6807\u5e8f\u5217\uff09\r\n        # \u5176\u4e2d\uff0cenc_inputs\u7684\u5927\u5c0f\u5e94\u8be5\u662f [batch_size, src_len] ;  dec_inputs\u7684\u5927\u5c0f\u5e94\u8be5\u662f [batch_size, dec_inputs]\r\n        \"\"\"\r\n        \u6e90\u6570\u636e\u8f93\u5165\u5230encoder\u4e4b\u540e\u5f97\u5230 enc_outputs, enc_self_attns\uff1b\r\n        enc_outputs\u662f\u9700\u8981\u4f20\u7ed9decoder\u7684\u77e9\u9635\uff0c\u8868\u793a\u6e90\u6570\u636e\u7684\u8868\u793a\u7279\u5f81\r\n        enc_self_attns\u8868\u793a\u5355\u8bcd\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u77e9\u9635\r\n        \"\"\"\r\n        enc_outputs, enc_self_attns = self.encoder(enc_inputs)\r\n        \"\"\"\r\n        decoder\u7684\u8f93\u5165\u6570\u636e\u5305\u62ec\u4e09\u90e8\u5206\uff1a\r\n        1. encoder\u5f97\u5230\u7684\u8868\u793a\u7279\u5f81enc_outputs\u3001\r\n        2. \u89e3\u7801\u5668\u7684\u8f93\u5165dec_inputs\uff08\u76ee\u6807\u5e8f\u5217\uff09\u3001\r\n        3. \u4ee5\u53caenc_inputs\r\n        \"\"\"\r\n        dec_outputs, dec_self_attns, dec_enc_attns = self.decoder(dec_inputs, enc_inputs, enc_outputs)\r\n        \"\"\"\r\n        \u5c06decoder\u7684\u8f93\u51fa\u6620\u5c04\u5230\u8bcd\u8868\u5927\u5c0f\uff0c\u6700\u540e\u8fdb\u884csoftmax\u8f93\u51fa\u5373\u53ef\r\n        \"\"\"\r\n        dec_logits = self.projection(dec_outputs) # dec_logits : [batch_size x src_vocab_size x tgt_vocab_size]\r\n        return dec_logits.view(-1, dec_logits.size(-1)), enc_self_attns, dec_self_attns, dec_enc_attns\r\n\r\n\r\n\r\n\r\ndef showgraph(attn):\r\n    attn = attn[-1].squeeze(0)[0]\r\n    attn = attn.squeeze(0).data.numpy()\r\n    fig = plt.figure(figsize=(n_heads, n_heads)) # [n_heads, n_heads]\r\n    ax = fig.add_subplot(1, 1, 1)\r\n    ax.matshow(attn, cmap='viridis')\r\n    ax.set_xticklabels(['']+sentences[0].split(), fontdict={'fontsize': 14}, rotation=90)\r\n    ax.set_yticklabels(['']+sentences[2].split(), fontdict={'fontsize': 14})\r\n    plt.show()\r\n\r\n\r\n\r\n\r\nif __name__ == '__main__':\r\n    # \u53e5\u5b50\u7684\u8f93\u5165\u90e8\u5206\r\n    \"\"\"\r\n    \u7b2c\u4e00\u4e2a\u53e5\u5b50 \u662f \u7f16\u7801\u5668\u7684\u8f93\u5165\r\n    \u7b2c\u4e8c\u4e2a\u53e5\u5b50 \u662f \u89e3\u7801\u5668\u7684\u8f93\u5165\r\n    \u7b2c\u4e09\u4e2a\u53e5\u5b50 \u662f \u6807\u7b7e\r\n    P \u53ef\u4ee5\u7406\u89e3\u4e3a \u7f16\u7801\u5668\u8f93\u5165\u7ed3\u675f\u7684\u5b57\u7b26\uff08Padding\u586b\u5145\u5b57\u7b26\uff09\r\n    S \u53ef\u4ee5\u7406\u89e3\u4e3a Start\r\n    E \u53ef\u4ee5\u7406\u89e3\u4e3a End\r\n    \u6b64\u5916\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u6587\u672c\u5185\u5bb9\u957f\u5ea6\u5f80\u5f80\u4f1a\u4e0d\u4e00\u81f4\uff0c\u56e0\u6b64\u5728\u4ee3\u7801\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u6700\u5927\u957f\u5ea6max_length\uff0c\r\n    - \u5927\u4e8emax_length\u7684\u53e5\u5b50\uff0c\u591a\u4f59\u7684\u90e8\u5206\u5c06\u4f1a\u88ab\u88c1\u526a\r\n    - \u5c0f\u4e8emax_length\u7684\u53e5\u5b50\uff0c\u7f3a\u5c11\u7684\u90e8\u5206\u5c06\u4f1a\u88ab\u586b\u5145\r\n    \"\"\"\r\n    sentences = ['ich mochte ein bier P', 'S i want a beer', 'i want a beer E']\r\n    # Transformer Parameters\r\n    # Padding Should be Zero\r\n    src_vocab = {'P': 0, 'ich': 1, 'mochte': 2, 'ein': 3, 'bier': 4}\r\n    src_vocab_size = len(src_vocab)\r\n    tgt_vocab = {'P': 0, 'i': 1, 'want': 2, 'a': 3, 'beer': 4, 'S': 5, 'E': 6}\r\n    number_dict = {i: w for i, w in enumerate(tgt_vocab)}\r\n    tgt_vocab_size = len(tgt_vocab)\r\n    src_len = 5 # length of source \u8f93\u5165\u957f\u5ea6\r\n    tgt_len = 5 # length of target \u89e3\u7801\u7aef\u7684\u8f93\u5165\u957f\u5ea6\r\n    d_model = 512  # Embedding Size  Embedding\u540e\u7684\u957f\u5ea6\r\n    d_ff = 2048  # FeedForward dimension  \u524d\u9988\u795e\u7ecf\u7f51\u7edc\u7684\u4e2d\u95f4\u7ef4\u5ea6\r\n    d_k = d_v = 64  # dimension of K(=Q), V\r\n    n_layers = 6  # number of Encoder of Decoder Layer   Encoder\u548cDecoder N\u7684\u4e2a\u6570\r\n    n_heads = 8  # number of heads in Multi-Head Attention  \u591a\u5934\u6ce8\u610f\u529b\u673a\u5236\u5206\u4e3a\u51e0\u4e2a\u5934\r\n    model = Transformer()\r\n    criterion = nn.CrossEntropyLoss()\r\n    optimizer = optim.Adam(model.parameters(), lr=0.001)\r\n    enc_inputs, dec_inputs, target_batch = make_batch(sentences)\r\n    for epoch in range(20):\r\n        optimizer.zero_grad()\r\n        outputs, enc_self_attns, dec_self_attns, dec_enc_attns = model(enc_inputs, dec_inputs)\r\n        loss = criterion(outputs, target_batch.contiguous().view(-1))\r\n        print('Epoch:', '%04d' % (epoch + 1), 'cost =', '{:.6f}'.format(loss))\r\n        loss.backward()\r\n        optimizer.step()\r\n    # Test\r\n    predict, _, _, _ = model(enc_inputs, dec_inputs)\r\n    predict = predict.data.max(1, keepdim=True)[1]\r\n    print(sentences[0], '->', [number_dict[n.item()] for n in predict.squeeze()])\r\n    print('first head of last state enc_self_attns')\r\n    showgraph(enc_self_attns)\r\n    print('first head of last state dec_self_attns')\r\n    showgraph(dec_self_attns)\r\n    print('first head of last state dec_enc_attns')\r\n    showgraph(dec_enc_attns)\r\n\r\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8923:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/ComfyUI-SVD-9003e0d579853779ec1412018d39fb0b.png"}}]);