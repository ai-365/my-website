
<h1 id="top">文件系统管理常见命令</h1>

<a style="position: fixed;top:100px;left:-20px;" href="#top">回到顶部</a>

- [文件系统管理命令汇总](#文件系统管理命令汇总)
- [Linux目录树的组织原则](#linux目录树的组织原则)
- [ls命令](#ls命令)
- [切换当前目录：cd命令](#切换当前目录cd命令)
- [复制文件](#复制文件)
- [复制目录](#复制目录)
- [mv命令](#mv命令)
- [rm命令](#rm命令)
- [获取文件名和目录名：basename和dirname命令](#获取文件名和目录名basename和dirname命令)
- [查看文件内容](#查看文件内容)
- [cat命令](#cat命令)
- [head和tail命令](#head和tail命令)
- [比较文件内容： cmp命令](#比较文件内容-cmp命令)
- [split命令](#split命令)
- [cut](#cut)
- [排序：sort命令](#排序sort命令)
- [grep命令](#grep命令)


##   文件系统管理命令汇总

如下表格是常见的文件系统管理命令，涵盖目录的操作、文件内容的操作，会使用这些命令，那么基本就能使用命令行熟练操作文件系统了。

|命令	|	作用|
|---	|	---|
cd	|	设置工作目录
pwd	|	显示当前工作目录
ls	|	列出目录下的文件列表
mkdir	|	建立一个空目录
rmdir	|	删除一个空目录
rm	|	删除文件
touch	|	新建文件
rename	|	文件重命名
cp	|	复制文件或目录
mv	|	移动文件或目录
cat	|	读取文件内容
tac	|	从最后一行往前读取文件内容
head	|	取出文件内容的前几行
tail	|	取出文件内容的后几行
nc	|	显示行号
wc	|	统计字数、行数
sed	|	查询、替换、增减文件内容
awk	|	以列为单位编辑结构化数据文件
grep	|	查询文件内容


##  Linux目录树的组织原则

Linux目录的组织是有一定的规律的，虽然不是强制的，但是用户在使用时也应该尽量遵循这种约定：
- /bin 常见的Linux用户命令，如ls、date、chmod
- /boot 包含Linux内核、启动配置文件（GRUB）
- /dev  包含设备访问的文件位置。包括终端设备tty、硬盘、鼠标、键盘等
- /etc  管理配置文件
- /home 用户的家目录，root是个例外，以/root为家目录
- /media 自动挂载的设备的位置，例如一个名为myusb的USB设备被挂载到/media/myusb
- /lib /bin和/sbin所需要的共享库
- /mnt  许多常见设备的挂载点，例如硬盘分区、远程文件系统
- /opt  附近应用程序软件
- /sbin  root用户使用的管理命令
- /sys 包含管理某些内核行为的控制文件
- /usr  UNIX resource 系统资源的简称，注意，不是user。
- /var 不同应用程序的数据目录，例如/var/ftp、/var/www。
- ~ 每个用户是家目录，存放用户自己的文件，自定义是配置文件等


## ls命令

ls是用的最多的命令，其作用是列出目录下的文件列表，或者列出某个文件信息。

ls的选项如下：

选项	|	作用
|---|---|
-a   	|	显示使用文件包括隐藏文件，以及.和..
-A  	|	类似-a，但不显示.和..
-l 	|	使用长列表格式，每行显示一个文件的详细信息
-t | 按照修改时间排序
-d | 只列出目录本身，而不是目录下的文件
-r 	|	逆序排列
-R 	|	递归显示子目录
-1 	|	每行只显示一个文件名
-S 	|	按照文件大小排序

##  切换当前目录：cd命令

cd命令的作用是切换当前目录。

有一些特定目录的简写，包括：
- `~`或者不写任何内容：回到当前用户的家目录，即$HOME。
- `.`   ：一个点，当前目录
-` .. ` 两个点，当前目录的上一级目录
- `$PWD`  ：当前目录
- `$OLDPWD`：  当前目录之前的目录




## 复制文件

复制一个文件到目标目录下：
```
cp  1.txt   dir 
```

复制的同时重命名：

```
cp 1.txt dir/2.txt
```

复制多个文件到目标目录下，这种情况就不能重命名了：

```
cp 1.txt 2.txt dir
```


## 复制目录

```
cp -r  dir1 dir2
```

此时，dir1会放到dir2下，形成dir2/dir1路径。

-r表示递归，在复制目录时，必须带上-r。

##  mv命令

mv命令的作用是移动文件，其主要选项如下：

选项	|	说明
|---	|	---|
-f	|	即force，如果目标文件已存在，则不会询问直接覆盖
-i	|	如果目标文件已存在，会询问
-u	|	如果目标文件已经存在，只有源文件较新才会覆盖

## rm命令

rm命令的作用是删除文件或目录，其主要选项如下：

选项	|	说明
|---	|	---|
-f	|	即force，忽略不存在的文件，不会出现警告信息
-I	|	交互模式，在删除前会询问是否确认删除
-r	|	递归删除，常用于目录的删除，*这个选项非常危险*。

例如：

```
rm -r dir # 删除dir目录本身及其子项
rm -r dir/*  # 删除dir目录下的东西，此时dir是个空目录
```

##  获取文件名和目录名：basename和dirname命令

有时候需要根据路径获取文件名和目录名，可以使用basename命令和dirname命令，这两个命令分别用于获取文件名和目录名，例如：


```
basename  /usr/bin/sed  # 取得路径的最后一个名称
输出：sed
dirname /usr/bin/sed  # 去掉路径最后一个名称
输出：/usr/bin
```

## 查看文件内容

查看文件内容的方式有很多，可以根据具体的情况选择，查看文件内容的命令汇总如下：

|命令	|	作用|
|---	|	---|
cat	|	最常用，正常显示文件内容
tac	|	从最后一行开始显示
nl	|	显示的时候，输出行号
more	|	一页一页的显示
less	|	于more类似，但可以往前翻页
head	|	只看前面几行
tail	|	只看后面几行
od	|	以二进制的方式显示文件内容

##   cat命令

查看文件内容最常用的就是cat命令，其选项如下：

|选项	|	说明|
|---	|	---|
-b	|	对非空白行显示行号，空白行则不显示
-E	|	将结尾的换行符`$`显示出来
-n	|	显示行号，包括空白行
-v	|	列出不可见的特殊字符

## head和tail命令

与cat读取文件的全部内容不同，head和tail命令用于读取文件的前几行或最后几行，在部分情况下非常有用。

head命令的作用是读取文件内容的前多少行。使用head命令一般只使用-n选项，该选项指定要读取前面多少行。

例如，如果想输出前25行，下面三个命令是等价的：

```sh
head -n25   1.md
head -n       25   1.md
head -25   1.md
```

-n 后面也可以跟负数，例如下面的命令输出除了最后5行以外的全部内容：

```sh
head  -n -5 input.txt
```

与head相反，tail命令用于读取文件内容的后多少行。下面两个命令均读取文件最后10行。

```sh
tail   -n   10   1.md
tail -10    1.md
```

如果数字带加号，表示从第几行开始输出，例如从第一行开始输出，即全部输出：

```sh
tail   -n   +1 
```

从第25行开始输出：

```sh
tail  -n   +25    1.md
```


## 比较文件内容： cmp命令

Linux cmp 命令用于比较两个文件是否有差异。当相互比较的两个文件完全一样时，则该指令不会显示任何信息。若发现有所差异，预设会标示出第一个不同之处的字符和列数编号。若不指定任何文件名称或是所给予的文件名为"-"，则cmp指令会从标准输入设备读取数据。

cmp命令的语法如下：

```
cmp [-clsv][-i <字符数目>][--help][第一个文件][第二个文件]
```

cmp命令的选项如下：

|选项	|	作用|
|---	|	---|
-c或--print-chars	|	除了标明差异处的十进制字码之外，一并显示该字符所对应字符。
-i<字符数目>或--ignore-initial=<字符数目> 	|	指定一个数目。
-l或--verbose 　	|	标示出所有不一样的地方。
-s或--quiet或--silent 　	|	不显示错误信息。
-v或--version 　	|	显示版本信息。
--help 　	|	在线帮助。

如下命令比较两个文本文件的差异：

```sh
cmp file1.txt   file2.txt 
```

## split命令

Linux split命令用于将一个文件分割成数个。该指令将大文件分割成较小的文件，在默认情况下将按照每1000行切割成一个小文件。

split命令语法如下：

```sh
split [--help][--version][-<行数>][-b <字节>][-C <字节>][-l <行数>][要切割的文件][输出文件名]
```

split命令的选项如下：

|选项	|	说明|
|---	|	---|
-行数	|	指定每多少行切成一个小文件
-b 字节数	|	 指定每多少字节切成一个小文件
-C 字节数	|	 与参数"-b"相似，但是在切 割时将尽量维持每行的完整性
[输出文件名]	|	设置切割后文件的前置文件名， split会自动在前置文件名后再加上编号


将文件file.txt每6行切割成一个文件，可使用如下命令：

```
split -6 file.txt
```


##   cut

cut命令的作用是以指定的分隔符分割文件内容，常用于结构化的文本内容，类似于Excel的数据分列。

cut命令的主要选项如下：

* -d : 指定分隔符
* -f  n ： 取出第n列
* -f  n-m ： 取出第n到第m列

例如有如下文本文件1.md：

```sh|
127.0.0.1
10.0.0.20
192.168.0.4
```

可以看到每一行都以点号分隔，可以使用如下命令取出第一列：

```sh
$ cut -d '.' -f 1  1.md
127
10
192
```

使用如下命令取出第2-3列：
```sh
$  cut  -d  '.'  -f  2-3  1.md
0.0
0.0
168.0
```


##  排序：sort命令
可以使用sort命令对每行进行排序，默认每从第一个字符开始，比较ASCII值进行排序。

sort命令选项如下：
* -r ： 逆序
* -f ： 不区分大小写
* -n ： 以数字为依据

对于文本的排序，例如如下文本文件1.md：

```
aa
abd
A
abc
```

运行`sort 1.md`后输出如下： 

```
A
aa
abc
abd
```

对于数值的排序，假设一个文件2.md如下：

```
2
3
10
111
```

必须加上-n告诉以数值为依据，否则会当成字符串以ASCII逐字符比较。如下示例：

```
$  sort -n  2.md
2
3
10
111
```



删除重复行前先进行排序，然后使用管道传递给uniq命令即可。

如下文本文件3.md：

```
A
B
A
A
B
```
运行如下命令删除重复行：

```sh
$  sort 3.md | uniq
A
B
```

## grep命令

可以在一个或多个文件中查找字符串

按行查找的。

在文本文件1.txt中查找word：

```
grep word 1.txt
```

在多个文件中，在输出前加上文件名及冒号，然后是包含搜索内容的文本。

grep word  *.txt
1.txt :
        1.txt中包含word的行
2.txt:
        2.txt中包含word的行
3.txt:
        3.txt中包含word的行

只显示包含内容的文件名：

```
grep  -l   text  *.txt
```

不区分大小写，如下示例搜索包含word、Word、WORD的行：

```
grep -i  word 1.txt
```

grep命令也支持管道，如下示例筛选出以.txt为后缀的文件：

```
ls | grep  *.txt
```



